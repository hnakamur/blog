<!DOCTYPE html>
<html lang="ja">
<head>
        <meta charset="utf-8" />
        <title>mecab-ipadicでconfigure実行したらmatrix.defが無いというエラー</title>
        <link rel="stylesheet" href="../../../../theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../../../../">hnakamur's blog at github </a></h1>
                <nav><ul>
                    <li class="active"><a href="../../../../category/blog.html">blog</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="../../../../2015/06/14/mecab-ipadic-matrix.def-missing/" rel="bookmark"
           title="Permalink to mecab-ipadicでconfigure実行したらmatrix.defが無いというエラー">mecab-ipadicでconfigure実行したらmatrix.defが無いというエラー</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-06-14T16:40:00+09:00">
                Published: 2015-06-14
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://hnakamur.github.io">Hiroaki Nakamura</a>
        </address>
<p>In <a href="../../../../category/blog.html">blog</a>.</p>

</footer><!-- /.post-info -->      <h2>TL;DR</h2>
<p>https://github.com/taku910/mecab/tree/master/mecab-ipadic を取得して
<code>./configure --with-charset="utf-8"</code> と実行したら
<code>configure: error: cannot find sources (matrix.def) in . or ..</code> というエラーが出て困ってます。解決策を知っている方ぜひ教えてください。</p>
<h2>経緯と詳細な手順</h2>
<p><a href="https://sites.google.com/site/rmecab/">rmecab</a>をインストールしたくて、<a href="http://rmecab.jp/wiki/index.php?RMeCab">RMeCab - RとLinuxと...</a>に沿ってまずはMeCabをインストールしました。</p>
<p><a href="http://ja.wikipedia.org/wiki/MeCab">MeCab - Wikipedia</a>によると公式サイトはsourceforge.netだったようですが、実際のページは<a href="http://mecab.googlecode.com/svn/trunk/mecab/doc/index.html">MeCab: Yet Another Part-of-Speech and Morphological Analyzer</a>とgooglecodeにあり、ソースをダウンロードしようと探すと<a href="https://code.google.com/hosting/moved?project=mecab">Google Project Hosting</a>とあり、githubに移ったようです。</p>
<p>ということで<a href="https://github.com/taku910/mecab">taku910/mecab</a>からソースを取得してビルドしてみました。確認した環境はOS X 10.10.3です。</p>
<p>mecabのconfigureオプションは<a href="http://rmecab.jp/wiki/index.php?RMeCab#content_1_2">Mac OS X 版バイナリ のインストール方法</a>の手順に合わせて <code>--with-charset="utf8"</code> をつけました。mecabは無事ビルド、インストール出来ました。</p>
<div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">taku910</span><span class="o">/</span><span class="n">mecab</span>
<span class="n">cd</span> <span class="n">mecab</span>
<span class="p">.</span><span class="o">/</span><span class="n">configure</span> <span class="c1">--with-charset=&quot;utf8&quot;</span>
<span class="n">make</span>
<span class="n">make</span> <span class="k">check</span>
<span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>


<p>次はmecab-ipadicをビルドしようとしたのですが、configureでエラーになりました。configureのオプションは上記のリンクの「c. 辞書もインストールします」の説明に合わせて <code>--with-charset="utf-8"</code> をつけています。</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ../mecab-ipadic
$ ./configure --with-charset<span class="o">=</span><span class="s2">&quot;utf-8&quot;</span>
configure: error: cannot find sources <span class="o">(</span>matrix.def<span class="o">)</span> in . or ..
</pre></div>


<p>matrix.defがどういうものか私は全く知らないのですが、mecab-jumandicにも同名のファイルがあったので、それを使ってビルドしてみたら通ることは通りました。</p>
<div class="highlight"><pre><span></span><span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="p">..</span><span class="o">/</span><span class="n">mecab</span><span class="o">-</span><span class="n">jumandic</span><span class="o">/</span><span class="n">matrix</span><span class="p">.</span><span class="n">def</span>
<span class="p">.</span><span class="o">/</span><span class="n">configure</span> <span class="c1">--with-charset=&quot;utf-8&quot;</span>
<span class="n">make</span>
<span class="n">sudo</span> <span class="n">make</span> <span class="n">install</span>
</pre></div>


<p>ただ、「すもももももももものうち」で試してみると「すもも」「も」の後の「もも」が正しく切り出せていません。</p>
<div class="highlight"><pre><span></span>$ mecab
すもももももももものうち
すもも  名詞,一般,*,*,*,*,すもも,スモモ,スモモ
も  助詞,係助詞,*,*,*,*,も,モ,モ
も  助詞,係助詞,*,*,*,*,も,モ,モ
も  助詞,係助詞,*,*,*,*,も,モ,モ
も  助詞,係助詞,*,*,*,*,も,モ,モ
も  助詞,係助詞,*,*,*,*,も,モ,モ
もの  名詞,非自立,一般,*,*,*,もの,モノ,モノ
うち  名詞,非自立,副詞可能,*,*,*,うち,ウチ,ウチ
EOS
</pre></div>


<p>ということで、mecab-ipadicの正しいビルド方法をご存知のかたはぜひ教えてください！</p>
<p>と書いてたら、イシュー立てるべきと気づいたので立てました。<a href="https://github.com/taku910/mecab/issues/18">mecab-ipadicでconfigure実行したらmatrix.defが無いというエラーが出る · Issue #18 · taku910/mecab</a> ぜひそちらにコメントお願いします！</p>
<h2>2015-06-17追記</h2>
<p>イシューにコメントを頂きました。
https://github.com/taku910/mecab/issues/18#issuecomment-112474144</p>
<p>IPA辞書は http://taku910.github.io/mecab/#download  からtarballをダウンロードするのが推奨とのことです。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is a custom version based on <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-53263855-1', 'auto');
    ga('send', 'pageview');
    </script>
</body>
</html>