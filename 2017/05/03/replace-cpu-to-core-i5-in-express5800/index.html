<!DOCTYPE html>
<html lang="ja">
<head>
        <meta charset="utf-8" />
        <title>自宅サーバExpress5800/S70タイプRBのCPUをCore i5 650に換装してみた</title>
        <link rel="stylesheet" href="../../../../theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../../../../">hnakamur's blog at github </a></h1>
                <nav><ul>
                    <li class="active"><a href="../../../../category/blog.html">blog</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="../../../../2017/05/03/replace-cpu-to-core-i5-in-express5800/" rel="bookmark"
           title="Permalink to 自宅サーバExpress5800/S70タイプRBのCPUをCore i5 650に換装してみた">自宅サーバExpress5800/S70タイプRBのCPUをCore i5 650に換装してみた</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-05-03T21:30:00+09:00">
                Published: 2017-05-03
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://hnakamur.github.io">Hiroaki Nakamura</a>
        </address>
<p>In <a href="../../../../category/blog.html">blog</a>.</p>
<p>tags: <a href="../../../../tag/hardware.html">hardware</a> <a href="../../../../tag/cpu.html">cpu</a> </p>
</footer><!-- /.post-info -->      <div class="section" id="id1">
<h2>はじめに</h2>
<p>私は
<a class="reference external" href="http://pc.usy.jp/wiki/378.html">NEC Express5800／S70 タイプRB - usyWiki</a>
を2011年に買って自宅サーバとして活用しています。一時期使って無い時期もありましたが、ここ2年ぐらいは使っています。</p>
<p>メモリを16GBに増設し、IntelのSSD (SSDSA2M160G2GC)を入れて使ってきましたが、CPUは出荷時の
Pentium G6950 (2.80GHz) のままでした。</p>
<p>性能面で特に不満はなかったのですが、最近見つけた
<a class="reference external" href="https://clickhouse.yandex/">ClickHouse — open source distributed column-oriented DBMS</a>
を試そうと思ったところ
<a class="reference external" href="https://clickhouse.yandex/reference_en.html#Systemrequirements">System requirements</a>
にx86_64アーキテクチャでSSE4.2の拡張命令セットが必要と書かれていました。</p>
<p>確認用のコマンドを実行してみると、SSE4.2はサポートされていませんでした。</p>
<div class="highlight"><pre><span></span><span class="gp">$</span> grep -q sse4_2 /proc/cpuinfo <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;SSE 4.2 supported&quot;</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&quot;SSE 4.2 not supported&quot;</span>
<span class="go">SSE 4.2 not supported</span>
</pre></div>
<p>ということで、人生初のCPU換装をやってみることにしました。</p>
</div>
<div class="section" id="cpu">
<h2>CPUとグリスの購入</h2>
<p>なるべく安く上げたいということで会社の同僚に相談したところソフマップで中古品として売っていた
<a class="reference external" href="https://ark.intel.com/ja/products/43546/Intel-Core-i5-650-Processor-4M-Cache-3_20-GHz">製品の仕様情報 - Intel® Core™ i5-650 Processor (4M Cache, 3.20 GHz)</a>
(クーラー付き)を勧められて4,298円で購入しました。</p>
<p>グリスはアイネックスの1回分使い切りサイズのシリコングリス <a class="reference external" href="http://www.ainex.jp/products/gs-01/">GS-01 | Ainex</a> をヨドバシで143円で購入しました。</p>
<p>グリスの選択は <a class="reference external" href="https://memotora.com/2015/09/09/cpu-grease-comparison-2015-september/">CPUグリス6製品の性能を比較してみた（2015年9月版） | メモトラ</a> の記事を参考にしました。</p>
</div>
<div class="section" id="id2">
<h2>換装</h2>
<p>初めての経験なのでうまくできるか心配でしたが、以下の記事などを見てなんとか出来ました。わかりやすく解説されていてとても助かりました。ありがとうございます！</p>
<ul class="simple">
<li><a class="reference external" href="http://www.pc-master.jp/jisaku/cpu-cooler-t.html">CPUクーラー取り外し　パソコン初心者講座</a></li>
<li><a class="reference external" href="http://www.pc-master.jp/jisaku/cpu-grease-k.html">CPUグリスの交換・塗り直し　パソコン初心者講座</a></li>
<li><a class="reference external" href="http://www.pc-master.jp/jisaku/cpu-t.html">CPU・CPUクーラー・メモリーの取り付け　パソコン初心者講座</a></li>
<li><a class="reference external" href="http://dzl79.xyz/k2507kc/entry1-54.html">[評判・口コミ]　アイネックス シリコングリス1.5g GS-01：人気のPC冷却パーツ・ファン関連の評価・口コミを真面目にお知らせ!</a></li>
</ul>
<p>まずはCPUクーラーを取り外しました。</p>
<img alt="fan Delta Electoronics AFB0912VHD photo1" src="../../../../2017/05/03/replace-cpu-to-core-i5-in-express5800/fan-Delta-Electronics-AFB0912VHD.photo1.jpg" style="width: 504px; height: 378px;" />
<img alt="fan Delta Electoronics AFB0912VHD photo2" src="../../../../2017/05/03/replace-cpu-to-core-i5-in-express5800/fan-Delta-Electronics-AFB0912VHD.photo2.jpg" style="width: 504px; height: 378px;" />
<p>型番を見て検索して Delta Electoronics AFB0912VHD というCPUクーラーだとわかりました。</p>
<p>次に、CPUソケットのレバーをどう動かすかがわからず困りました。
トルクスねじのT20のドライバーでねじが回せたので外してみたのですが、これは余計なことでした。
ねじを外してみてわかったのですが、手前のCPUソケットに対応してマザーボードの裏側に金属板が入っていてこれに対してねじ止めされていたのが外れてしまいました。</p>
<img alt="CPU socket" src="../../../../2017/05/03/replace-cpu-to-core-i5-in-express5800/CPU-socket.jpg" style="width: 504px; height: 378px;" />
<p>再びつけるために一旦マザーボードのねじをすべて外して持ち上げる必要がありました。ケースに対してマザーボードがぎりぎりのサイズなのでなかなか大変でした。
取り付けるときにようやくわかったのですが、CPUクーラーのレバーは上の写真で右方向に引き出してから手前に上げればよかったんですね。</p>
<p>この後、ソケットにCPUを載せてグリスを塗りました。上の記事に</p>
<blockquote>
グリスの目的が表面の反りと粗さを埋めるものですから、厚さとして0.05~0.1ミリあれば十分。</blockquote>
<p>とあったので薄めにしました。「1回分使い切りサイズ」というのは相当余裕を見ているようで、ほんのちょっとしか使わなかったです。</p>
<p>購入したCPUに付属していたCPUクーラーは Intel E41997-002 でした。</p>
<img alt="fan Intel E41997-002 photo1" src="../../../../2017/05/03/replace-cpu-to-core-i5-in-express5800/fan-Intel-E41997-002.photo1.jpg" style="width: 504px; height: 378px;" />
<img alt="fan Intel E41997-002 photo2" src="../../../../2017/05/03/replace-cpu-to-core-i5-in-express5800/fan-Intel-E41997-002.photo2.jpg" style="width: 504px; height: 378px;" />
<p>2時間弱かかってようやく換装が終了しました。
ちゃんと起動するかドキドキでしたが、電源を入れてみると無事起動しました！</p>
</div>
<div class="section" id="cpuinfo">
<h2>cpuinfoの比較</h2>
<div class="section" id="pentium-g6950-2-80ghz">
<h3>換装前のPentium G6950 (2.80GHz)</h3>
<div class="highlight"><pre><span></span><span class="gp">$</span> cat /proc/cpuinfo
<span class="go">processor       : 0</span>
<span class="go">vendor_id       : GenuineIntel</span>
<span class="go">cpu family      : 6</span>
<span class="go">model           : 37</span>
<span class="go">model name      : Intel(R) Pentium(R) CPU        G6950  @ 2.80GHz</span>
<span class="go">stepping        : 5</span>
<span class="go">microcode       : 0x2</span>
<span class="go">cpu MHz         : 1197.000</span>
<span class="go">cache size      : 3072 KB</span>
<span class="go">physical id     : 0</span>
<span class="go">siblings        : 2</span>
<span class="go">core id         : 0</span>
<span class="go">cpu cores       : 2</span>
<span class="go">apicid          : 0</span>
<span class="go">initial apicid  : 0</span>
<span class="go">fpu             : yes</span>
<span class="go">fpu_exception   : yes</span>
<span class="go">cpuid level     : 11</span>
<span class="go">wp              : yes</span>
<span class="go">flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm pcid popcnt lahf_lm tpr_shadow vnmi flexpriority ept vpid dtherm arat</span>
<span class="go">bugs            :</span>
<span class="go">bogomips        : 5585.76</span>
<span class="go">clflush size    : 64</span>
<span class="go">cache_alignment : 64</span>
<span class="go">address sizes   : 36 bits physical, 48 bits virtual</span>
<span class="go">power management:</span>

<span class="go">processor       : 1</span>
<span class="go">vendor_id       : GenuineIntel</span>
<span class="go">cpu family      : 6</span>
<span class="go">model           : 37</span>
<span class="go">model name      : Intel(R) Pentium(R) CPU        G6950  @ 2.80GHz</span>
<span class="go">stepping        : 5</span>
<span class="go">microcode       : 0x2</span>
<span class="go">cpu MHz         : 1197.000</span>
<span class="go">cache size      : 3072 KB</span>
<span class="go">physical id     : 0</span>
<span class="go">siblings        : 2</span>
<span class="go">core id         : 2</span>
<span class="go">cpu cores       : 2</span>
<span class="go">apicid          : 4</span>
<span class="go">initial apicid  : 4</span>
<span class="go">fpu             : yes</span>
<span class="go">fpu_exception   : yes</span>
<span class="go">cpuid level     : 11</span>
<span class="go">wp              : yes</span>
<span class="go">flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx est tm2 ssse3 cx16 xtpr pdcm pcid popcnt lahf_lm tpr_shadow vnmi flexpriority ept vpid dtherm arat</span>
<span class="go">bugs            :</span>
<span class="go">bogomips        : 5585.76</span>
<span class="go">clflush size    : 64</span>
<span class="go">cache_alignment : 64</span>
<span class="go">address sizes   : 36 bits physical, 48 bits virtual</span>
<span class="go">power management:</span>
</pre></div>
</div>
<div class="section" id="core-i5-650-3-20ghz">
<h3>換装後のCore i5 650 (3.20GHz)</h3>
<div class="highlight"><pre><span></span><span class="gp">$</span> cat /proc/cpuinfo
<span class="go">processor       : 0</span>
<span class="go">vendor_id       : GenuineIntel</span>
<span class="go">cpu family      : 6</span>
<span class="go">model           : 37</span>
<span class="go">model name      : Intel(R) Core(TM) i5 CPU         650  @ 3.20GHz</span>
<span class="go">stepping        : 2</span>
<span class="go">microcode       : 0xc</span>
<span class="go">cpu MHz         : 3193.000</span>
<span class="go">cache size      : 4096 KB</span>
<span class="go">physical id     : 0</span>
<span class="go">siblings        : 2</span>
<span class="go">core id         : 0</span>
<span class="go">cpu cores       : 2</span>
<span class="go">apicid          : 0</span>
<span class="go">initial apicid  : 0</span>
<span class="go">fpu             : yes</span>
<span class="go">fpu_exception   : yes</span>
<span class="go">cpuid level     : 11</span>
<span class="go">wp              : yes</span>
<span class="go">flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt aes lahf_lm tpr_shadow vnmi flexpriority ept vpid dtherm ida arat</span>
<span class="go">bugs            :</span>
<span class="go">bogomips        : 6384.15</span>
<span class="go">clflush size    : 64</span>
<span class="go">cache_alignment : 64</span>
<span class="go">address sizes   : 36 bits physical, 48 bits virtual</span>
<span class="go">power management:</span>

<span class="go">processor       : 1</span>
<span class="go">vendor_id       : GenuineIntel</span>
<span class="go">cpu family      : 6</span>
<span class="go">model           : 37</span>
<span class="go">model name      : Intel(R) Core(TM) i5 CPU         650  @ 3.20GHz</span>
<span class="go">stepping        : 2</span>
<span class="go">microcode       : 0xc</span>
<span class="go">cpu MHz         : 3193.000</span>
<span class="go">cache size      : 4096 KB</span>
<span class="go">physical id     : 0</span>
<span class="go">siblings        : 2</span>
<span class="go">core id         : 2</span>
<span class="go">cpu cores       : 2</span>
<span class="go">apicid          : 4</span>
<span class="go">initial apicid  : 4</span>
<span class="go">fpu             : yes</span>
<span class="go">fpu_exception   : yes</span>
<span class="go">cpuid level     : 11</span>
<span class="go">wp              : yes</span>
<span class="go">flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx rdtscp lm constant_tsc arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc aperfmperf pni pclmulqdq dtes64 monitor ds_cpl vmx smx est tm2 ssse3 cx16 xtpr pdcm sse4_1 sse4_2 popcnt aes lahf_lm tpr_shadow vnmi flexpriority ept vpid dtherm ida arat</span>
<span class="go">bugs            :</span>
<span class="go">bogomips        : 6384.15</span>
<span class="go">clflush size    : 64</span>
<span class="go">cache_alignment : 64</span>
<span class="go">address sizes   : 36 bits physical, 48 bits virtual</span>
<span class="go">power management:</span>
</pre></div>
</div>
</div>
<div class="section" id="sysbench">
<h2>sysbenchの比較</h2>
<div class="section" id="id5">
<h3>換装前のPentium G6950 (2.80GHz)</h3>
<div class="highlight"><pre><span></span><span class="gp">$</span> sysbench --test<span class="o">=</span>cpu --num-threads<span class="o">=</span><span class="m">2</span> run
<span class="go">sysbench 0.4.12:  multi-threaded system evaluation benchmark</span>

<span class="go">Running the test with following options:</span>
<span class="go">Number of threads: 2</span>

<span class="go">Doing CPU performance benchmark</span>

<span class="go">Threads started!</span>
<span class="go">Done.</span>

<span class="go">Maximum prime number checked in CPU test: 10000</span>


<span class="go">Test execution summary:</span>
<span class="go">    total time:                          5.1692s</span>
<span class="go">    total number of events:              10000</span>
<span class="go">    total time taken by event execution: 10.3368</span>
<span class="go">    per-request statistics:</span>
<span class="go">         min:                                  1.03ms</span>
<span class="go">         avg:                                  1.03ms</span>
<span class="go">         max:                                  5.32ms</span>
<span class="go">         approx.  95 percentile:               1.04ms</span>

<span class="go">Threads fairness:</span>
<span class="go">    events (avg/stddev):           5000.0000/3.00</span>
<span class="go">    execution time (avg/stddev):   5.1684/0.00</span>
</pre></div>
</div>
<div class="section" id="id6">
<h3>換装後のCore i5 650 (3.20GHz)</h3>
<div class="highlight"><pre><span></span><span class="gp">$</span> sysbench --test<span class="o">=</span>cpu --num-threads<span class="o">=</span><span class="m">2</span> run
<span class="go">sysbench 0.4.12:  multi-threaded system evaluation benchmark</span>

<span class="go">Running the test with following options:</span>
<span class="go">Number of threads: 2</span>

<span class="go">Doing CPU performance benchmark</span>

<span class="go">Threads started!</span>
<span class="go">Done.</span>

<span class="go">Maximum prime number checked in CPU test: 10000</span>


<span class="go">Test execution summary:</span>
<span class="go">    total time:                          4.3400s</span>
<span class="go">    total number of events:              10000</span>
<span class="go">    total time taken by event execution: 8.6786</span>
<span class="go">    per-request statistics:</span>
<span class="go">         min:                                  0.86ms</span>
<span class="go">         avg:                                  0.87ms</span>
<span class="go">         max:                                  3.32ms</span>
<span class="go">         approx.  95 percentile:               0.87ms</span>

<span class="go">Threads fairness:</span>
<span class="go">    events (avg/stddev):           5000.0000/3.00</span>
<span class="go">    execution time (avg/stddev):   4.3393/0.00</span>
</pre></div>
</div>
</div>
<div class="section" id="sse-4-2">
<h2>SSE 4.2がサポートされている確認</h2>
<div class="highlight"><pre><span></span><span class="gp">$</span> grep -q sse4_2 /proc/cpuinfo <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;SSE 4.2 supported&quot;</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&quot;SSE 4.2 not supported&quot;</span>
<span class="go">SSE 4.2 supported</span>
</pre></div>
<p>サポートされています！</p>
</div>
<div class="section" id="id7">
<h2>おわりに</h2>
<p>苦労はしましたが、無事に換装出来てよかったです。良い経験になりました。</p>
</div>

    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is a custom version based on <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-53263855-1', 'auto');
    ga('send', 'pageview');
    </script>
</body>
</html>