<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja-jp" lang="ja-jp">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.96.0" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>LXDでコンテナの初期化に使われるテンプレート &middot; hnakamur&#39;s blog</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="https://hnakamur.github.io/blog/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://hnakamur.github.io/blog/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://hnakamur.github.io/blog/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://hnakamur.github.io/blog/css/copy-button.css">
  <link type="text/css" rel="stylesheet" href="https://hnakamur.github.io/blog/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://hnakamur.github.io/blog/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="https://hnakamur.github.io/blog/favicon.png">

  
  


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-53263855-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-53263855-1');
</script>



</head>

  <body class=" ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://hnakamur.github.io/blog/"><h1>hnakamur&#39;s blog</h1></a>
      <p class="lead">
       my tech memo 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="https://hnakamur.github.io/blog/"> blog home </a></li><li><a href="https://github.com/hnakamur"> github @hnakamur </a></li><li><a href="https://twitter.com/hnakamur2"> twitter @hnakamur2 </a></li>
      </ul>
    </nav>

    <p>powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://pages.github.com/">GitHub Pages</a></p>
    <p>&copy; 2022. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>LXDでコンテナの初期化に使われるテンプレート</h1>
  <time datetime=2019-08-15T11:00:00&#43;0900 class="post-date">2019-08-15</time>
  <nav id="TableOfContents"></nav>
  <h1 id="はじめに">はじめに</h1>
<p><a href="https://cloudinit.readthedocs.io/en/latest/topics/dir_layout.html">Custom network configuration with cloud-init - LXD - system container manager</a> に説明がありますが、LXDのコンテナイメージにはいくつかのテンプレートファイルがメタデータとして含まれていて、コンテナの初期化の際に使用されます。</p>
<p>CentOS 7 のコンテナは cloud-init 非対応ですが、 Ubuntu のほうは cloud-init に対応していますので、 cloud-init を利用して初期化時に様々な設定が可能です。</p>
<p>今後の参照用にテンプレートの内容を以下にメモしておきます。</p>
<h1 id="ローカルにダウンロードされたイメージ">ローカルにダウンロードされたイメージ</h1>
<p><code>lxc launch ubuntu:18.04 コンテナ名</code> で Ubuntu 18.04 LTS のコンテナを作成し、
<code>lxc launch images:centos/7 コンテナ名</code> で CentOS 7 のコンテナを作成した後、
ローカルにダウンロードされたイメージを確認すると以下のようになっていました
（イメージの fingerprint はイメージのバージョンによって異なります）。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> lxc image list
</span></span><span class="line"><span class="cl"><span class="go">+-------+--------------+--------+-----------------------------------------------+--------+----------+-------------------------------+
</span></span></span><span class="line"><span class="cl"><span class="go">| ALIAS | FINGERPRINT  | PUBLIC |                  DESCRIPTION                  |  ARCH  |   SIZE   |          UPLOAD DATE          |
</span></span></span><span class="line"><span class="cl"><span class="go">+-------+--------------+--------+-----------------------------------------------+--------+----------+-------------------------------+
</span></span></span><span class="line"><span class="cl"><span class="go">|       | 2dd611e2689a | no     | ubuntu 18.04 LTS amd64 (release) (20190813.1) | x86_64 | 177.60MB | Aug 14, 2019 at 11:07pm (UTC) |
</span></span></span><span class="line"><span class="cl"><span class="go">+-------+--------------+--------+-----------------------------------------------+--------+----------+-------------------------------+
</span></span></span><span class="line"><span class="cl"><span class="go">|       | a0f13708a581 | no     | Centos 7 amd64 (20190814_07:08)               | x86_64 | 84.07MB  | Aug 15, 2019 at 1:29am (UTC)  |
</span></span></span><span class="line"><span class="cl"><span class="go">+-------+--------------+--------+-----------------------------------------------+--------+----------+-------------------------------+
</span></span></span></code></pre></div><p>私は LXD を snap でインストールしているのでローカルにダウンロードされたイメージは <code>/var/snap/lxd/common/lxd/images/</code> にあります。</p>
<p>file コマンドで確認すると fingerprint と同じ名前のファイルと <code>.rootfs</code> の拡張子がついたファイルがあり、前者は xz で圧縮されたデータ、後者は squashfs のファイルシステム形式であることがわかります。前者は実際は .tar.xz 形式になっています。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> sudo sh -c <span class="s1">&#39;file /var/snap/lxd/common/lxd/images/*&#39;</span>
</span></span><span class="line"><span class="cl"><span class="go">/var/snap/lxd/common/lxd/images/2dd611e2689a8efc45807bd2a86933cf2da0ffc768f57814724a73b5db499eac:        XZ compressed data
</span></span></span><span class="line"><span class="cl"><span class="go">/var/snap/lxd/common/lxd/images/2dd611e2689a8efc45807bd2a86933cf2da0ffc768f57814724a73b5db499eac.rootfs: Squashfs filesystem, little endian, version 4.0, 186228545 bytes, 35653 inodes, blocksize: 131072 bytes, created: Tue Aug 13 16:35:42 2019
</span></span></span><span class="line"><span class="cl"><span class="go">/var/snap/lxd/common/lxd/images/a0f13708a581b3d73de64a785559ae1c5ce773e4b7eb009eedb032563c851994:        XZ compressed data
</span></span></span><span class="line"><span class="cl"><span class="go">/var/snap/lxd/common/lxd/images/a0f13708a581b3d73de64a785559ae1c5ce773e4b7eb009eedb032563c851994.rootfs: Squashfs filesystem, little endian, version 4.0, 88156577 bytes, 14110 inodes, blocksize: 1048576 bytes, created: Wed Aug 14 07:22:52 2019
</span></span></span></code></pre></div><h1 id="ubuntu-1804-lts-イメージのテンプレート">Ubuntu 18.04 LTS イメージのテンプレート</h1>
<p>以下のコマンドでテンプレートを展開します。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mkdir /tmp/ubuntu-templates
</span></span><span class="line"><span class="cl"><span class="gp">$</span> sudo tar xf /var/snap/lxd/common/lxd/images/2dd611e2689a8efc45807bd2a86933cf2da0ffc768f57814724a73b5db499eac -C /tmp/ubuntu-templates/
</span></span></code></pre></div><p>ファイル一覧は以下の通りです。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> <span class="o">(</span><span class="nb">cd</span> /tmp/ubuntu-templates/<span class="p">;</span> find . -type f <span class="p">|</span> sort<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="go">./metadata.yaml
</span></span></span><span class="line"><span class="cl"><span class="go">./templates/cloud-init-meta.tpl
</span></span></span><span class="line"><span class="cl"><span class="go">./templates/cloud-init-network.tpl
</span></span></span><span class="line"><span class="cl"><span class="go">./templates/cloud-init-user.tpl
</span></span></span><span class="line"><span class="cl"><span class="go">./templates/cloud-init-vendor.tpl
</span></span></span><span class="line"><span class="cl"><span class="go">./templates/hostname.tpl
</span></span></span></code></pre></div><p>metadata.yaml の内容は以下の通りです。上記の <code>*.tpl</code> のテンプレートファイルがどのパスに展開されるかの対応が分かります。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">architecture</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;x86_64&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">creation_date</span><span class="p">:</span><span class="w"> </span><span class="m">1565716206</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">properties</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">architecture</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;x86_64&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Ubuntu 18.04 LTS server (20190813.1)&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">os</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;ubuntu&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">release</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;bionic&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">templates</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">/etc/hostname</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">when</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="l">create</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="l">copy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l">hostname.tpl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">/var/lib/cloud/seed/nocloud-net/meta-data</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">when</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="l">create</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="l">copy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l">cloud-init-meta.tpl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">/var/lib/cloud/seed/nocloud-net/network-config</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">when</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="l">create</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="l">copy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l">cloud-init-network.tpl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">/var/lib/cloud/seed/nocloud-net/user-data</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">when</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="l">create</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="l">copy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l">cloud-init-user.tpl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">properties</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">     	   #cloud-config
</span></span></span><span class="line"><span class="cl"><span class="sd">     	   {}</span><span class="w">     
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">/var/lib/cloud/seed/nocloud-net/vendor-data</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">when</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="l">create</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span>- <span class="l">copy</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l">cloud-init-vendor.tpl</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">properties</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">     	   #cloud-config
</span></span></span><span class="line"><span class="cl"><span class="sd">     	   {}</span><span class="w">     
</span></span></span></code></pre></div><p>templates/cloud-init-meta.tpl の内容は以下の通りです。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">instance-id</span><span class="p">:</span><span class="w"> </span>{{<span class="w"> </span><span class="l">container.name }}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">local-hostname</span><span class="p">:</span><span class="w"> </span>{{<span class="w"> </span><span class="l">container.name }}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>{{<span class="w"> </span><span class="l">config_get(&#34;user.meta-data&#34;, &#34;&#34;) }}</span><span class="w">
</span></span></span></code></pre></div><p>templates/cloud-init-network.tpl の内容は以下の通りです。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl">{<span class="l">% if config_get(&#34;user.network-config&#34;, &#34;&#34;) == &#34;&#34; %}version: 1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">config</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span>- <span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">physical</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">eth0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">subnets</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">type</span><span class="p">:</span><span class="w"> </span>{<span class="l">% if config_get(&#34;user.network_mode&#34;, &#34;&#34;) == &#34;link-local&#34; %}manual{% else %}dhcp{% endif %}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">control</span><span class="p">:</span><span class="w"> </span><span class="l">auto{% else %}{{ config_get(&#34;user.network-config&#34;, &#34;&#34;) }}{% endif %}</span><span class="w">
</span></span></span></code></pre></div><p>templates/cloud-init-user.tpl の内容は以下の通りです。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl">{{<span class="w"> </span><span class="l">config_get(&#34;user.user-data&#34;, properties.default) }}</span><span class="w">
</span></span></span></code></pre></div><p>templates/cloud-init-vendor.tpl の内容は以下の通りです。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl">{{<span class="w"> </span><span class="l">config_get(&#34;user.vendor-data&#34;, properties.default) }}</span><span class="w">
</span></span></span></code></pre></div><p>templates/hostname.tpl の内容は以下の通りです。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl">{{<span class="w"> </span><span class="l">container.name }}</span><span class="w">
</span></span></span></code></pre></div><h1 id="centos-7-イメージのテンプレート">CentOS 7 イメージのテンプレート</h1>
<p>以下のコマンドでテンプレートを展開します。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> mkdir /tmp/centos7-templates
</span></span><span class="line"><span class="cl"><span class="gp">$</span> sudo tar xf /var/snap/lxd/common/lxd/images/a0f13708a581b3d73de64a785559ae1c5ce773e4b7eb009eedb032563c851994 -C /tmp/centos7-templates
</span></span></code></pre></div><p>ファイル一覧は以下の通りです。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> <span class="o">(</span><span class="nb">cd</span> /tmp/centos7-templates/<span class="p">;</span> find . -type f <span class="p">|</span> sort<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="go">./metadata.yaml
</span></span></span><span class="line"><span class="cl"><span class="go">./templates/hosts.tpl
</span></span></span><span class="line"><span class="cl"><span class="go">./templates/ifcfg-eth0.lxd.tpl
</span></span></span><span class="line"><span class="cl"><span class="go">./templates/network.lxd.tpl
</span></span></span></code></pre></div><p>metadata.yaml の内容は以下の通りです。上記の <code>*.tpl</code> のテンプレートファイルがどのパスに展開されるかの対応が分かります。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">architecture: x86_64
</span></span></span><span class="line"><span class="cl"><span class="go">creation_date: 1565767338
</span></span></span><span class="line"><span class="cl"><span class="go">expiry_date: 1568359338
</span></span></span><span class="line"><span class="cl"><span class="go">properties:
</span></span></span><span class="line"><span class="cl"><span class="go">  architecture: x86_64
</span></span></span><span class="line"><span class="cl"><span class="go">  description: Centos 7 x86_64 (20190814_07:08)
</span></span></span><span class="line"><span class="cl"><span class="go">  name: centos-7-x86_64-default-20190814_07:08
</span></span></span><span class="line"><span class="cl"><span class="go">  os: centos
</span></span></span><span class="line"><span class="cl"><span class="go">  release: &#34;7&#34;
</span></span></span><span class="line"><span class="cl"><span class="go">  serial: &#34;20190814_07:08&#34;
</span></span></span><span class="line"><span class="cl"><span class="go">  variant: default
</span></span></span><span class="line"><span class="cl"><span class="go">templates:
</span></span></span><span class="line"><span class="cl"><span class="go">  /etc/hosts:
</span></span></span><span class="line"><span class="cl"><span class="go">    when:
</span></span></span><span class="line"><span class="cl"><span class="go">    - create
</span></span></span><span class="line"><span class="cl"><span class="go">    - copy
</span></span></span><span class="line"><span class="cl"><span class="go">    create_only: false
</span></span></span><span class="line"><span class="cl"><span class="go">    template: hosts.tpl
</span></span></span><span class="line"><span class="cl"><span class="go">    properties: {}
</span></span></span><span class="line"><span class="cl"><span class="go">  /etc/sysconfig/network:
</span></span></span><span class="line"><span class="cl"><span class="go">    when:
</span></span></span><span class="line"><span class="cl"><span class="go">    - create
</span></span></span><span class="line"><span class="cl"><span class="go">    - copy
</span></span></span><span class="line"><span class="cl"><span class="go">    create_only: false
</span></span></span><span class="line"><span class="cl"><span class="go">    template: network.lxd.tpl
</span></span></span><span class="line"><span class="cl"><span class="go">    properties: {}
</span></span></span><span class="line"><span class="cl"><span class="go">  /etc/sysconfig/network-scripts/ifcfg-eth0:
</span></span></span><span class="line"><span class="cl"><span class="go">    when:
</span></span></span><span class="line"><span class="cl"><span class="go">    - create
</span></span></span><span class="line"><span class="cl"><span class="go">    - copy
</span></span></span><span class="line"><span class="cl"><span class="go">    create_only: false
</span></span></span><span class="line"><span class="cl"><span class="go">    template: ifcfg-eth0.lxd.tpl
</span></span></span><span class="line"><span class="cl"><span class="go">    properties: {}
</span></span></span></code></pre></div><p>templates/hosts.tpl の内容は以下の通りです。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">127.0.1.1	{{ container.name }}
</span></span></span><span class="line"><span class="cl"><span class="go">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
</span></span></span><span class="line"><span class="cl"><span class="go">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
</span></span></span></code></pre></div><p>templates/ifcfg-eth0.lxd.tpl の内容は以下の通りです。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">DEVICE=eth0
</span></span></span><span class="line"><span class="cl"><span class="go">BOOTPROTO=dhcp
</span></span></span><span class="line"><span class="cl"><span class="go">ONBOOT=yes
</span></span></span><span class="line"><span class="cl"><span class="go">HOSTNAME={{ container.name }}
</span></span></span><span class="line"><span class="cl"><span class="go">NM_CONTROLLED=no
</span></span></span><span class="line"><span class="cl"><span class="go">TYPE=Ethernet
</span></span></span><span class="line"><span class="cl"><span class="go">MTU=
</span></span></span><span class="line"><span class="cl"><span class="go">DHCP_HOSTNAME=`hostname`
</span></span></span></code></pre></div><p>templates/network.lxd.tpl の内容は以下の通りです。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="go">NETWORKING=yes
</span></span></span><span class="line"><span class="cl"><span class="go">HOSTNAME={{ container.name }}
</span></span></span></code></pre></div>
</div>


<script src="https://hnakamur.github.io/blog/js/copy-button.js"></script>
    </main>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-53263855-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </body>
</html>
