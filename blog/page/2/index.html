
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>hnakamur's blog at github</title>
  <meta name="author" content="Hiroaki Nakamura">

  
  <meta name="description" content="mruby (軽量ruby) ソース公開 | quredo-styleを見て、自分の環境でlua, luajit, V8, ruby, mrubyで試してみた。 テスト環境 Model: MacBook Air 13-inch, Mid 2011
CPU: 1.7GHz Intel Core i5 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://hnakamur.github.com/blog/blog/page/2">
  <link href="/blog/favicon.png" rel="icon">
  <link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/blog/javascripts/modernizr-2.0.js"></script>
  <script src="/blog/javascripts/ender.js"></script>
  <script src="/blog/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/blog/atom.xml" rel="alternate" title="hnakamur's blog at github" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/blog/">hnakamur's blog at github</a></h1>
  
    <h2>my trial and error log</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/blog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:hnakamur.github.com/blog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/blog/">Blog</a></li>
  <li><a href="/blog/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/05/04/fib-39-benchmark-in-lua/">lua, V8, ruby, mrubyでfib(39)の実行時間比較</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-05-04T11:06:00+09:00" pubdate data-updated="true">2012-05-04</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.quredo.net/2012/04/mruby-%E8%BB%BD%E9%87%8Fruby-%E3%82%BD%E3%83%BC%E3%82%B9%E5%85%AC%E9%96%8B/">mruby (軽量ruby) ソース公開 | quredo-style</a>を見て、自分の環境でlua, luajit, V8, ruby, mrubyで試してみた。</p>

<p>テスト環境</p>

<ul>
<li>Model: MacBook Air 13-inch, Mid 2011</li>
<li>CPU: 1.7GHz Intel Core i5</li>
<li>RAM: 4GB 1333MHz DDR3</li>
<li>OS: Mac OS X Lion 10.7.3</li>
</ul>


<h2>lua</h2>

<p>fib.lua</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>function fib(n)
</span><span class='line'>  if n &lt; 2 then
</span><span class='line'>    return n
</span><span class='line'>  end
</span><span class='line'>  return fib(n-2) + fib(n-1)
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>print(fib(39))</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ lua -v
</span><span class='line'>Lua 5.1.4  Copyright (C) 1994-2008 Lua.org, PUC-Rio
</span><span class='line'>$ time lua fib.lua
</span><span class='line'>63245986
</span><span class='line'>
</span><span class='line'>real  0m21.368s
</span><span class='line'>user  0m21.345s
</span><span class='line'>sys   0m0.016s</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ./lua -v
</span><span class='line'>Lua 5.2.0  Copyright (C) 1994-2011 Lua.org, PUC-Rio
</span><span class='line'>$ time ./lua fib.lua
</span><span class='line'>63245986
</span><span class='line'>
</span><span class='line'>real  0m19.603s
</span><span class='line'>user  0m19.585s
</span><span class='line'>sys   0m0.012s</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ ./luajit -v
</span><span class='line'>Lua 5.1.5  Copyright (C) 1994-2012 Lua.org, PUC-Rio
</span><span class='line'>LuaJIT 1.1.8  Copyright (C) 2005-2012 Mike Pall, http://luajit.org/
</span><span class='line'>$ time ./luajit fib.lua
</span><span class='line'>63245986
</span><span class='line'>
</span><span class='line'>real  0m4.302s
</span><span class='line'>user  0m4.292s
</span><span class='line'>sys   0m0.006s</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ luajit -v
</span><span class='line'>LuaJIT 2.0.0-beta9 -- Copyright (C) 2005-2011 Mike Pall. http://luajit.org/
</span><span class='line'>$ time luajit fib.lua
</span><span class='line'>63245986
</span><span class='line'>
</span><span class='line'>real  0m1.299s
</span><span class='line'>user  0m1.289s
</span><span class='line'>sys   0m0.004s</span></code></pre></td></tr></table></div></figure>


<h2>V8</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>function fib(n) {
</span><span class='line'>  if (n &lt; 2) return n;
</span><span class='line'>  return fib(n-2) + fib(n-1);
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>print(fib(39));</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ v8
</span><span class='line'>V8 version 3.9.24 [sample shell]
</span><span class='line'>&gt; quit()
</span><span class='line'>$ time v8 fib.js
</span><span class='line'>63245986
</span><span class='line'>
</span><span class='line'>real  0m1.417s
</span><span class='line'>user  0m1.407s
</span><span class='line'>sys   0m0.013s</span></code></pre></td></tr></table></div></figure>


<h2>ruby</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>def fib n
</span><span class='line'>  return n if n &lt; 2
</span><span class='line'>  fib(n-2) + fib(n-1)
</span><span class='line'>end
</span><span class='line'>
</span><span class='line'>puts fib(39)</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rbenv version
</span><span class='line'>1.8.7-p358 (set by /Users/hnakamur/.rbenv/version)
</span><span class='line'>$ time ruby fib.rb
</span><span class='line'>63245986
</span><span class='line'>
</span><span class='line'>real  1m47.227s
</span><span class='line'>user  1m46.945s
</span><span class='line'>sys   0m0.132s</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rbenv version
</span><span class='line'>1.9.3-p125 (set by /Users/hnakamur/.rbenv/version)
</span><span class='line'>$ time ruby fib.rb
</span><span class='line'>63245986
</span><span class='line'>
</span><span class='line'>real  0m16.504s
</span><span class='line'>user  0m16.374s
</span><span class='line'>sys   0m0.051s</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ time bin/mruby fib.rb 
</span><span class='line'>63245986
</span><span class='line'>
</span><span class='line'>real  0m35.465s
</span><span class='line'>user  0m35.423s
</span><span class='line'>sys   0m0.014s</span></code></pre></td></tr></table></div></figure>


<p>[2012-05-03 23:21]</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/11/custom-file-template-for-xcode-4-dot-3-1/">Xcode 4.3.1のファイルテンプレートをカスタマイズ</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-11T20:22:00+09:00" pubdate data-updated="true">2012-03-11</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://meandmark.com/blog/2011/11/creating-custom-xcode-4-file-templates/">Creating Custom Xcode 4 File Templates</a>を参考に作成してみました。</p>

<p>Apple提供のファイルテンプレートは
/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates/File Templates
にあるとのこと。ですが、Xcode 4.3.1からは/Developperではなく/Applications/Xcodeにインストールされるので、Xcode 4.3.1のみの環境ではここにはないかもしれません。</p>

<p>私は<a href="https://github.com/MacRuby/MacRuby">MacRubyのgithubレポジトリ</a>をクローンして、misc/xcode4-templates/File Templates/Ruby/Ruby File.xctemplate/ をコピーして書き換えてカスタマイズしました。</p>

<p>コピー先は
/Users/ユーザ名/Library/Developer/Xcode/Templates/File Templates/グループ名/ファイルタイプ.xctemplate/
です。</p>

<p>コピー後Xcodeを再起動すると認識されました。</p>

<p>なお、オリジナルと同じグループ名とファイルタイプにすると、同じ名前のものが2つ並んで紛らわしい状態になります。ですので、違う名前にしたほうが良いです。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/11/try-macruby-nightly-2012-03-07-with-xcode-4-dot-3-1/">macruby-nightly-2012-03-07をXcode 4.3.1で試す</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-11T12:29:00+09:00" pubdate data-updated="true">2012-03-11</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://d.hatena.ne.jp/seiunsky/20111225/1324740191">おまいらもMacRubyでMacアプリ作ろう - @sugamasao.blog.title # => ”コードで世界を変えたい”</a>を見て、ファイルやプロジェクトのテンプレートを追加すればXcode 4.3.1も使えそうだと思い、<a href="http://d.hatena.ne.jp/kouji0625/20090919/p1">Snow LeopardのXcodeにRubyCocoaのテンプレートをインストール - 高尾宏治日記 on はてな</a>を参考にコピーしてみようかと思ったのですが、<a href="http://www.macruby.org/trac/ticket/1466">#1466 (does not install MacRuby&#8217;s Templetes and rb_nibtool into Xcode 4.3) – MacRuby</a>というページを見つけました。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer/ </span></code></pre></td></tr></table></div></figure>


<p>を実行しておいてから、
<a href="http://www.macruby.org/files/nightlies/">MacRuby » Files</a>から<a href="http://www.macruby.org/files/nightlies/macruby_nightly-2012-03-07.pkg">macruby_nightly-2012-03-07.pkg</a>を実行してインストールしてみました。</p>

<p>これでばっちりになりました。新規プロジェクト作成で[MacRuby Application]も選択可能ですし、Interface BuilderでHelloWorldControllerのoutletも認識されました。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/11/try-macruby-0-dot-10-with-xcode-4-dot-2-1/">Xcode 4.2.1でMacRuby 0.10を試す</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-11T10:42:00+09:00" pubdate data-updated="true">2012-03-11</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Xcode 4.1やXcode 4.3.1ではうまくいかずXcode 4.2.1ならOKだった</h2>

<p>最終的にうまく行ったバージョンの組み合わせは以下の通りです。</p>

<ul>
<li>Mac OS X 10.7.3</li>
<li>Xcode 4.2.1</li>
<li>MacRuby 0.10</li>
</ul>


<p>最初は以下の環境でした。</p>

<ul>
<li>Mac OS X 10.7.3</li>
<li>Xcode 4.1 (4.1.xのxはうろ覚えだけど4.1.1だったかな)</li>
</ul>


<p><a href="http://www.macruby.org/downloads.html">MacRuby » Download MacRuby</a>
からMacRuby 0.10をダウンロードし、インストールしました。</p>

<p><a href="http://www.macruby.org/documentation/tutorial.html">MacRuby » Introductory Tutorial</a>を試していたのですが、XcodeのInterface BuilderでHelloWorldControllerを作ってもoutletが認識されないという問題が発生しました。</p>

<p>ググってみると<a href="http://www.macruby.org/trac/ticket/1322">#1322 (Xcode 4.1/4.2) – MacRuby</a>というページが。で、とりあえず最新のXcode 4.3.1をApp Storeからインストールしてみました。インストール時には元のXcode 4.1は消さずに残すようにしました。
で、Xcode 4.3.1で試したのですが[File]/[New]/[Project &#8230;]メニューを選んで、[Mac OS X]の[Application]を選んでも[MacRuby Application]が出てこない。</p>

<p>MacRubyより後にXcode 4.3.1をインストールしたので認識されていないのかなと思い、再度MacRuby 0.10のインストーラを実行するも変わらず。</p>

<p>Xcode 4.3.1のインストーラに古いXcodeを消すか聞かれた時に、Xcode 4.1とInstall Xcode 4.2.1が並んでいて、Install Xcode 4.2.1の行には/Applications/Install Xcode.appと書かれていました。そこでそれを実行してみると、Xcode 4.1が4.2.1にアップグレードされました。</p>

<p>これでようやくInterface BuilderでHelloWorldControllerのoutletが認識されるようになりました。</p>

<p><a href="https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_4_3.html">What&#8217;s New In Xcode: New Features in Xcode 4.3</a>にも書かれていますが、Xcode 4.1/4.2は/Developer、Xcode 4.3.1は/Applications/Xcode.appにインストールされます。</p>

<p>さらに、<a href="http://stackoverflow.com/questions/669367/can-i-have-multiple-xcode-versions-installed">osx - Can I have multiple Xcode versions installed? - Stack Overflow</a>によるとXcodeのインストーラ実行時に[location&#8230;]プルダウンでインストール先のディレクトリを変えておけば複数バージョンの同居は可能らしいです。私は既に4.1を4.2.1にアップグレードしてしまったので4.2.1と4.3.1のみですが、これを知ってたら4.1も残しておきたかった。</p>

<p><a href="https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcode-select.1.html">xcode-select(1) Mac OS X Developer Tools Manual Page</a>によると、4.2.1への切替は</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>xcode-select -switch /Developer</span></code></pre></td></tr></table></div></figure>


<p><a href="https://github.com/MacRuby/MacRuby">MacRuby/MacRuby</a>によると、4.3.1への切替は</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer/</span></code></pre></td></tr></table></div></figure>


<p>で出来るようです。と書きながら気付いたのですが、上のリンクにMacRubyのインストール前にこれをやる必要があるかもと書いてますね。しかし、これをやってからMacRubyを再度インストールしてみましたが、やっぱり新規プロジェクト作成で[MacRuby Application]は出て来ませんでした。</p>

<p>ただ、xcode-selectで何が変わるのかはよくわかりません。Xcode自体は4.2.1は/Developer/Applications/Xcode.app、4.3.1は/Applications/Xcode.appで起動すればよいだけですし。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/03/delete-on-close-using-mod-xsendfile/">mod_xsendfileでダウンロード後にサーバ上のファイル自動削除</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-03T20:26:00+09:00" pubdate data-updated="true">2012-03-03</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://tn123.org/mod_xsendfile/">mod_xsendfile</a>のホームページ上でリリースされているバージョン0.12には含まれていませんが、<a href="https://github.com/nmaier/mod_xsendfile/commit/f6b853ce0e555b61f83f928d9f927349346018b4">Githubのレポジトリのソース</a>ではX-Sendfile-Temporaryという拡張ヘッダに対応しています。</p>

<p>Scientific Linux 6.1で実験しました。</p>

<h2>mod_xsendfileのインストール</h2>

<p>以下の手順でインストールします。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>yum install -y httpd-devel
</span><span class='line'>git clone https://github.com/nmaier/mod_xsendfile.git
</span><span class='line'><span class="nb">cd </span>mod_xsendfile
</span><span class='line'>apxs -cia mod_xsendfile.c
</span></code></pre></td></tr></table></div></figure>


<p>実験スクリプト用にApacheの設定ファイルを作成します。</p>

<figure class='code'><figcaption><span>/etc/httpd/conf.d/xsendfile_test.conf</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>&lt;Directory /var/www/html/xsendfile&gt;
</span><span class='line'>    XSendFilePath /var/www/html/xsendfile/data AllowFileDelete
</span><span class='line'>    &lt;Files out.php&gt;
</span><span class='line'>      XSendFile on
</span><span class='line'>    &lt;/Files&gt;
</span><span class='line'>&lt;/Directory&gt;
</span></code></pre></td></tr></table></div></figure>


<p>Apache再起動。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>/etc/init.d/httpd graceful
</span></code></pre></td></tr></table></div></figure>


<h2>実験</h2>

<p>実験スクリプト用のフォルダを作ります。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mkdir /var/www/html/xsendfile/data/
</span><span class='line'>chown -R apache:apache /var/www/html/xsendfile
</span></code></pre></td></tr></table></div></figure>


<p>実験用のPHPスクリプトを作成します。</p>

<figure class='code'><figcaption><span>/var/www/html/xsendfile/out.php</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="cp">&lt;?php</span>
</span><span class='line'><span class="nv">$path</span> <span class="o">=</span> <span class="s1">&#39;/var/www/html/xsendfile/data/file1.txt&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$fname</span> <span class="o">=</span> <span class="nb">basename</span><span class="p">(</span><span class="nv">$path</span><span class="p">);</span>
</span><span class='line'><span class="nb">header</span><span class="p">(</span><span class="s2">&quot;X-Sendfile-Temporary: </span><span class="si">$path</span><span class="s2">&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nb">header</span><span class="p">(</span><span class="s2">&quot;Content-Type: application/octet-stream&quot;</span><span class="p">);</span>
</span><span class='line'><span class="nb">header</span><span class="p">(</span><span class="s2">&quot;Content-Disposition: attachment; filename=</span><span class="se">\&quot;</span><span class="si">$fname</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>実験用のダウンロードファイルを作成します。</p>

<figure class='code'><figcaption><span>/var/www/html/xsendfile/data/file1.txt</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>Hello, X-Sendfile-Temporary!
</span></code></pre></td></tr></table></div></figure>


<p>これで、ブラウザで http://your_host_here/xsendfile/out.php を開くとダウンロード後にサーバ上のファイルが削除されました。</p>

<h2>今回のはまりポイント</h2>

<figure class='code'><figcaption><span>/etc/httpd/conf.d/xsendfile_test.conf</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>&lt;Directory /var/www/html/xsendfile&gt;
</span><span class='line'>    XSendFilePath /var/www/html/xsendfile/data
</span><span class='line'>    &lt;Files out.php&gt;
</span><span class='line'>      XSendFile on
</span><span class='line'>    &lt;/Files&gt;
</span><span class='line'>&lt;/Directory&gt;
</span></code></pre></td></tr></table></div></figure>


<p>のようにAllowFileDeleteを忘れていたら、out.phpを開いた時に404 Not Foundエラーになり、Apacheのエラーログには以下のようなエラーが出ていました。</p>

<figure class='code'><figcaption><span>/var/log/httpd/error_log</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>[Sat Mar 03 15:57:07 2012] [error] [client 192.168.11.3] (14)Bad address: xsendfile: cannot open file: (null)
</span></code></pre></td></tr></table></div></figure>


<p>AllowFileDeleteをつければOKでした。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/03/how-to-setup-octopress/">octopressでgithubにブログ開設</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-03T18:34:00+09:00" pubdate data-updated="true">2012-03-03</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>rbenvとoctopressをインストールしてgithubにブログを作る手順のメモです。</p>

<h2>rbenvをインストール</h2>

<ul>
<li><a href="https://github.com/sstephenson/rbenv#section_2.1">sstephenson/rbenv</a></li>
<li><a href="https://github.com/sstephenson/ruby-build">sstephenson/ruby-build</a></li>
</ul>


<p>を参考にインストールしました。</p>

<p>インストール先は~/.rbenvとしました。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd
</span><span class='line'>git clone git://github.com/sstephenson/rbenv.git .rbenv
</span><span class='line'>
</span><span class='line'>echo 'export PATH="$HOME/.rbenv/bin:$PATH"' &gt;&gt; .bash_profile
</span><span class='line'>echo 'eval "$(rbenv init -)"' &gt;&gt; .bash_profile
</span><span class='line'>
</span><span class='line'>. ~/.bash_profile</span></code></pre></td></tr></table></div></figure>


<p>ruby-buildをインストールします。なお、私はHomebrewを使っているので/usr/localには書き込み権限をつけてあります。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd
</span><span class='line'>git clone git://github.com/sstephenson/ruby-build.git
</span><span class='line'>cd ruby-build
</span><span class='line'>./install.sh</span></code></pre></td></tr></table></div></figure>


<p>rbenvでruby 1.9.2-p290をインストール。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rbenv install 1.9.2-p290</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rbenv versions
</span><span class='line'>* 1.9.2-p290 (set by /Users/hnakamur/octopress/.rbenv-version)</span></code></pre></td></tr></table></div></figure>


<p>でインストールされたrubyがrbenvで認識されたことを確認。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rbenv global 1.9.2-p290</span></code></pre></td></tr></table></div></figure>


<p>で切替。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ which ruby
</span><span class='line'>/Users/hnakamur/.rbenv/shims/ruby
</span><span class='line'>$ ruby --version
</span><span class='line'>ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin11.3.0]</span></code></pre></td></tr></table></div></figure>


<h2>octopressでgitにブログをセットアップ</h2>

<p><a href="http://octopress.org/docs/deploying/github/">Deploying to Github Pages - Octopress</a>
を参考にセットアップしました。</p>

<p>ここでは~/octopressを作業ディレクトリとしました。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd
</span><span class='line'>git clone git://github.com/imathis/octopress.git octopre
</span><span class='line'>cd octopress
</span><span class='line'>ruby --version
</span><span class='line'>gem install bundler
</span><span class='line'>rbenv rehash
</span><span class='line'>rake install</span></code></pre></td></tr></table></div></figure>


<p>ブラウザでgithubを開き、自分のアカウント(私の場合はhnakamur)でblogというプロジェクトを作ります。ブラウザで https://github.com/hnakamur/blog を開き、&#8221;Next steps:&#8221;に</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git remote add origin git@github.com:hnakamur/blog.git</span></code></pre></td></tr></table></div></figure>


<p>と書かれている行のgitのURL(ここではgit@github.com:hnakamur/blog.git)をコピーします。</p>

<p>その後</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rake setup_github_pages</span></code></pre></td></tr></table></div></figure>


<p>を実行し、&#8221;Enter the read/write url for your repository:&#8221;というプロンプトが出たらURLを貼り付けます。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Enter the read/write url for your repository: git@github.com:hnakamur/blog.git</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>vi _config.yml</span></code></pre></td></tr></table></div></figure>


<p>ブログタイトルなどを編集します。</p>

<figure class='code'><figcaption><span>_config.yml</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>url: http://hnakamur.github.com/blog
</span><span class='line'>title: &quot;hnakamur&#39;s blog at github&quot;
</span><span class='line'>subtitle: my trial and error log
</span><span class='line'>author: Hiroaki Nakamura
</span><span class='line'>…(略)…
</span><span class='line'>date_format: &quot;%Y-%m-%d&quot;
</span><span class='line'>…(略)…
</span></code></pre></td></tr></table></div></figure>


<p>さらに</p>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>permalink: /blog/:year/:month/:day/:title/
</span><span class='line'>…(略)…
</span><span class='line'>category_dir: blog/categories
</span><span class='line'>…(略)…
</span><span class='line'>titlecase: true       # Converts page and post titles to titlecase
</span></code></pre></td></tr></table></div></figure>


<p>を以下のように変更します。</p>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>permalink: /:year/:month/:day/:title/
</span><span class='line'>…(略)…
</span><span class='line'>category_dir: categories
</span><span class='line'>…(略)…
</span><span class='line'>titlecase: false      # Converts page and post titles to titlecase
</span></code></pre></td></tr></table></div></figure>


<p>これは記事のパーマリンクやカテゴリページのURLが/blog/blog/…のようになってしまうのを/blog/…のようにするためです。</p>

<p>またタイトルの先頭を大文字にするのもオフにしています。</p>

<p>なお、アーカイブのページのURLは/blog/blog/archiveになってしまっていますが、変更方法をまだ見つけられていません。</p>

<h2>記事の作成と投稿</h2>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>rake new_post[&#39;Hello, octopress!&#39;]
</span></code></pre></td></tr></table></div></figure>


<p>と実行すると、最後に</p>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>Creating new post: source/_posts/2012-03-03-hello.markdown
</span></code></pre></td></tr></table></div></figure>


<p>と作成されたファイルが表示されます。</p>

<p>エディタでこのファイルを開いて記事を書きます。</p>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>vi source/_posts/2012-03-03-hello.markdown
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>---
</span><span class='line'>layout: post
</span><span class='line'>title: &quot;Hello, octopress!&quot;
</span><span class='line'>date: 2012-03-03 17:57
</span><span class='line'>comments: true
</span><span class='line'>categories: octopress
</span><span class='line'>---
</span><span class='line'>octopressでブログ記事を投稿してみるテスト。
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>rake generate
</span></code></pre></td></tr></table></div></figure>


<p>でHTMLが生成されます。</p>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>rake preview
</span></code></pre></td></tr></table></div></figure>


<p>を実行して、ブラウザで
http://localhost:4000/blog/
を開くと、プレビューできます。</p>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>rake deploy
</span></code></pre></td></tr></table></div></figure>


<p>でgithubにプッシュされ、10分ぐらい待つと
http://hnakamur.github.com/blog/
に記事のページで作られました。</p>

<p>時間がかかるのは初回にgithub pagesを作るときだけで、次回以降は即座に作られました。</p>

<h2>記事のソースをgithubにプッシュ</h2>

<p>リモートの設定にoriginを追加して、そこをデフォルトのブランチに設定。</p>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>git remote add origin git@github.com:hnakamur/blog.git
</span><span class='line'>git config branch.master.remote origin
</span></code></pre></td></tr></table></div></figure>


<p>設定の変更と生成されたソースをコミット、プッシュします。</p>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>git add .
</span><span class='line'>git commit -m &#39;Modify config. Add source and sass&#39;
</span><span class='line'>git push origin HEAD:source
</span></code></pre></td></tr></table></div></figure>


<p>github上でのブランチ名をsourceではなくmasterにしてよければ、単に</p>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>git push
</span></code></pre></td></tr></table></div></figure>


<p>でOKです。</p>

<h2>ローカルのApacheでプレビュー</h2>

<p>Apacheは事前にセットアップ済みという前提で、プレビュー用の設定を追加します。</p>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>sudo vi /etc/apache2/other/blog.conf
</span></code></pre></td></tr></table></div></figure>


<p>と実行して、以下の内容で作成します(hnakamurの部分は自分のアカウント名で置換してください)。</p>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>Alias /blog /Users/hnakamur/octopress/public/blog
</span><span class='line'>&lt;Directory /Users/hnakamur/octopress/public/blog&gt;
</span><span class='line'>  AllowOverride None
</span><span class='line'>  DirectoryIndex index.html
</span><span class='line'>  Order allow,deny
</span><span class='line'>  Allow from all
</span><span class='line'>&lt;/Directory&gt;
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>sudo apachectl restart
</span></code></pre></td></tr></table></div></figure>


<p>でApacheを再起動します。</p>

<p>これ以降は記事を編集してrake generateだけ実行すれば <a href="http://localhost/blog/">http://localhost/blog/</a> を開いてプレビューできます。</p>

<h2>今回のはまりポイント</h2>

<h3>YAMLで文字列を&#8221;&#8220;で囲む必要があった</h3>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>$ rake generate
</span><span class='line'>(in /Users/hnakamur/octopress)
</span><span class='line'>## Generating Site with Jekyll
</span><span class='line'>unchanged sass/screen.scss
</span><span class='line'>/Users/hnakamur/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/psych.rb:148:in `parse&#39;: couldn&#39;t parse YAML at line 16 column 13 (Psych::SyntaxError)
</span><span class='line'>  from /Users/hnakamur/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/psych.rb:148:in `parse_stream&#39;
</span><span class='line'>  from /Users/hnakamur/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/psych.rb:119:in `parse&#39;
</span><span class='line'>  from /Users/hnakamur/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/psych.rb:106:in `load&#39;
</span><span class='line'>  from /Users/hnakamur/.rbenv/versions/1.9.2-p290/lib/ruby/1.9.1/psych.rb:205:in `load_file&#39;
</span><span class='line'>  from /Users/hnakamur/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/jekyll-0.11.0/lib/jekyll.rb:119:in `configuration&#39;
</span><span class='line'>  from /Users/hnakamur/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/gems/jekyll-0.11.0/bin/jekyll:207:in `&lt;top (required)&gt;&#39;
</span><span class='line'>  from /Users/hnakamur/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/bin/jekyll:19:in `load&#39;
</span><span class='line'>  from /Users/hnakamur/.rbenv/versions/1.9.2-p290/lib/ruby/gems/1.9.1/bin/jekyll:19:in `&lt;main&gt;&#39;
</span></code></pre></td></tr></table></div></figure>


<p>_config.ymlの</p>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>date_format: %Y-%m-%dT%k:%M:%S%z
</span></code></pre></td></tr></table></div></figure>


<p>を</p>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>date_format: &quot;%Y-%m-%dT%k:%M:%S%z&quot;
</span></code></pre></td></tr></table></div></figure>


<p>と修正して再実行したらOKでした。</p>

<h3>git push origin sourceでエラー</h3>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>$ git push origin source
</span><span class='line'>error: src refspec source does not match any.
</span><span class='line'>error: failed to push some refs to &#39;git@github.com:hnakamur/blog.git&#39;
</span></code></pre></td></tr></table></div></figure>


<p>ググって <a href="http://stackoverflow.com/questions/959477/error-when-git-push-to-github">Error when &#8220;git push&#8221; to github - Stack Overflow</a> を発見。</p>

<figure class='code'><figcaption><span>_config.yml (before edit)</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='text'><span class='line'>git push origin HEAD:source
</span></code></pre></td></tr></table></div></figure>


<p>にしたらOK。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/03/hello/">Hello, octopress!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-03T17:57:00+09:00" pubdate data-updated="true">2012-03-03</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>octopressでブログ記事を投稿してみるテスト。</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/02/09/s3-error-either-the-signature-query-string-parameter-or-the-authorization-header-should-be-specified/">S3 error: Either the Signature query string parameter or the Authorization header should be specified</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/02/use-unbound-dns-server/">Unboundで在宅時に自宅サーバの名前解決</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/03/virtualbox4decentos6-dot-2woinsutoru/">VirtualBox4でCentOS6.2をインストール</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/27/node-dot-jsfalsefs-dot-watch-deshe-ding-huairugageng-xin-saretararirodo/">node.jsのfs.watch()で設定ファイルが更新されたらリロード</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/06/27/node-http-proxydebatiyaruhosutodezhen-rifen-ketutuhttp-slash-https-%3Ewebsocketribasupurokisifalseshi-yan/">node-http-proxyでバーチャルホストで振り分けつつhttp/https->websocketリバースプロキシの実験</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/hnakamur">@hnakamur</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'hnakamur',
            count: 5,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/blog/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("hnakamur2", 5, false);
    });
  </script>
  <script src="/blog/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/hnakamur2" class="twitter-follow-button" data-show-count="false">Follow @hnakamur2</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Hiroaki Nakamura -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
