<!DOCTYPE html>
<html lang="ja">
<head>
        <meta charset="utf-8" />
        <title>Ubuntu 17.10とgnomeとIBus mozcのキーボードショートカットを自分好みに設定</title>
        <link rel="stylesheet" href="../../../../theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../../../../">hnakamur's blog at github </a></h1>
                <nav><ul>
                    <li class="active"><a href="../../../../category/blog.html">blog</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="../../../../2018/03/30/ubuntu-17.10-gnome-IBus-mozc-keyboard-shortcut/" rel="bookmark"
           title="Permalink to Ubuntu 17.10とgnomeとIBus mozcのキーボードショートカットを自分好みに設定">Ubuntu 17.10とgnomeとIBus mozcのキーボードショートカットを自分好みに設定</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-03-30T16:30:00+09:00">
                Published: 2018-03-30
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://hnakamur.github.io">Hiroaki Nakamura</a>
        </address>
<p>In <a href="../../../../category/blog.html">blog</a>.</p>
<p>tags: <a href="../../../../tag/ubuntu.html">ubuntu</a> <a href="../../../../tag/windows.html">windows</a> </p>
</footer><!-- /.post-info -->      <div class="section" id="id1">
<h2>はじめに</h2>
<p>私はThinkPadとMacBook ProでともにUSキーボードを使っています。
Windows、macOS、Ubuntuでウィンドウ切り替えと日本語入力切り替えのキーボードショートカットを設定したのでメモです。
日本語入力はWindowsとmacOSでは <a class="reference external" href="https://www.google.co.jp/ime/">Google 日本語入力 – Google</a> 、
UbuntuではIBusと <a class="reference external" href="https://github.com/google/mozc">google/mozc: Mozc - a Japanese Input Method Editor designed for multi-platform</a> です。</p>
</div>
<div class="section" id="id2">
<h2>デフォルトのキーボードショートカット</h2>
<ul class="simple">
<li><a class="reference external" href="https://gist.github.com/rothgar/7079722">GNOME 3 keyboard shortcuts</a></li>
<li><a class="reference external" href="https://support.microsoft.com/en-us/help/12445/windows-keyboard-shortcuts">Keyboard shortcuts in Windows - Windows Help</a></li>
<li><a class="reference external" href="https://support.apple.com/ja-jp/HT201236">Mac のキーボードショートカット - Apple サポート</a></li>
</ul>
<p>上記に書いていないのもありますが、今回設定したいのは以下の3つの操作です。</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="23%" />
<col width="21%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">操作</th>
<th class="head">GNOME</th>
<th class="head">Windows</th>
<th class="head">macOS</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>アプリ切り替え</td>
<td>alt + tab</td>
<td>alt + tab</td>
<td>command + tab</td>
</tr>
<tr><td>アプリ内ウィンドウ切り替え</td>
<td>super + backquote</td>
<td>(なし)</td>
<td>command + F1</td>
</tr>
<tr><td>日本語入力切り替え</td>
<td>super + space</td>
<td>alt + backquote</td>
<td>command + space</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>superはThinkPadではWindowsキー、MacBook Proではcommandキーです。</li>
<li>super, altのキーの並びはThinkPadでは左からsuper, altでMacBook Proではalt, superです。</li>
</ul>
<p>日本語入力切り替えについての補足。
* Windowsでは入力ソースはGoogle日本語入力だけにしていて、Google日本語入力内で直接入力とひらがなを切り替えています。日本語キーボードだと全角/半角キーで切り替えですが、USキーボードだとalt + backquoteです。
* macOSではシステム環境設定のキーボードの入力ソースを「U.S.」と「ひらがな(Google)」の2つにしています。で、キーボードのショートカットの「入力メニューの次のソースを選択」のショートカットで切り替えています。
* Ubuntuでは「設定」の「地域と言語」で入力ソースを「英語(US)」と「日本語(Mozc)」の2つにしています（ <a class="reference external" href="https://www.ubuntulinux.jp/japanese">Ubuntuの日本語Remix</a> でセットアップするとこうなっていました）。で、「設定」→「デバイス」→「キーボード」の「次の入力ソースへ切り替える」のショートカットで切り替えています。</p>
</div>
<div class="section" id="id3">
<h2>変更後のキーボードショートカット</h2>
<p>結論を先に書くと以下のように設定しました。</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="18%" />
<col width="18%" />
<col width="16%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">操作</th>
<th class="head">GNOME (ThinkPad)</th>
<th class="head">GNOME (MacBook)</th>
<th class="head">Windows</th>
<th class="head">macOS</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>アプリ切り替え</td>
<td>alt + tab</td>
<td>super + tab</td>
<td>alt + tab</td>
<td>command + tab</td>
</tr>
<tr><td>アプリ内ウィンドウ切り替え</td>
<td>super + backquote</td>
<td>alt + backquote</td>
<td>(なし)</td>
<td>alt + backquote</td>
</tr>
<tr><td>日本語入力切り替え</td>
<td>alt + backquote</td>
<td>super + backquote</td>
<td>alt + backquote</td>
<td>command + backquote</td>
</tr>
</tbody>
</table>
<p>設定変更手順は以下の通りです。</p>
<ul>
<li><p class="first">GNOME (ThinkPad)</p>
<blockquote>
<ul class="simple">
<li>「設定」→「デバイス」→「キーボード」の「次の入力ソースへ切り替える」を alt + backquote に変更。「前の入力ソースへ切り替える」は自動的にshift + alt + backquoteに変更される。</li>
</ul>
</blockquote>
</li>
<li><p class="first">GNOME (MacBook)</p>
<blockquote>
<ul class="simple">
<li>「設定」→「デバイス」→「キーボード」の「次の入力ソースへ切り替える」を super + backquote に変更。「前の入力ソースへ切り替える」は自動的にshift + super + backquoteに変更される。</li>
</ul>
</blockquote>
</li>
<li><p class="first">Windows</p>
<blockquote>
<ul class="simple">
<li>設定変更なし</li>
</ul>
</blockquote>
</li>
<li><p class="first">macOS</p>
<blockquote>
<ul class="simple">
<li>「システム環境設定」→「キーボード」→「ショートカット」タブで「入力ソース」の「入力メニューの次のソースを選択」をcommand + backquote、「前の入力ソースを選択」をshift + command + backquoteに変更。</li>
<li>「システム環境設定」→「キーボード」→「ショートカット」タブで「キーボード」の「次のウィンドウを捜査対象にする」をalt + backquoteに変更。</li>
</ul>
</blockquote>
</li>
</ul>
</div>
<div class="section" id="ibus-mozc">
<h2>IBus mozcの初期状態をひらがなにする</h2>
<p>IBus 1.5以降はデフォルトではIBus mozcの初期状態は「ひらがな」ではなく「直接入力」になっています。
おそらく入力ソースをmozcのみにして日本語キーボードの全角/半角キーで切り替えることを想定しているのだと推測します。</p>
<p>mozcの設定ではIMEの有効化や無効化の設定にaltやsuperのキーを含めることはできないようでした。
私はsuper + backquoteやalt + backquoteで日本語入力を切り替えたいのでmozcの設定はそのままにして
「英語(US)」と「日本語(Mozc)」の2つの入力ソースの切り替えを使うことにしました。</p>
<p>そうなるとmozcは起動状態で入力モードが「ひらがな」になってほしいわけです。検索してみると
<a class="reference external" href="https://github.com/google/mozc/issues/381">Is there a way to set hiragana as default? · Issue #381 · google/mozc</a> というイシューがあってそれを見ると <a class="reference external" href="https://github.com/hnakamur/mozc-deb/blob/90658a834d2905fe7b4aef2be4c39647689a4fd1/debian/patches/activate-on-launch.patch">パッチ</a> を当ててmozcをビルドすれば良いそうです。</p>
<p>ということでビルドして
<a class="reference external" href="https://launchpad.net/~hnakamur/+archive/ubuntu/mozc">mozc : Hiroaki Nakamura</a>
に置きました。</p>
<p>debパッケージのソースレポジトリは <a class="reference external" href="https://github.com/hnakamur/mozc-deb">https://github.com/hnakamur/mozc-deb</a> に置いています。
せっかくなので新しいパッケージをベースにしようと思い、Ubuntu 18.04用のパッケージ <a class="reference external" href="https://packages.ubuntu.com/bionic/ibus-mozc">Ubuntu – bionic の ibus-mozc パッケージに関する詳細</a> をベースにしました。</p>
<p>これをインストールして再起動すれば私にとっては快適な環境になりました。</p>
</div>

    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is a custom version based on <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-53263855-1', 'auto');
    ga('send', 'pageview');
    </script>
</body>
</html>