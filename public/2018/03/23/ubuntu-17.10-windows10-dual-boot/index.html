<!DOCTYPE html>
<html lang="ja">
<head>
        <meta charset="utf-8" />
        <title>Ubuntu 17.10とWindows10でデュアルブート構成にしてみた</title>
        <link rel="stylesheet" href="../../../../theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../../../../">hnakamur's blog at github </a></h1>
                <nav><ul>
                    <li class="active"><a href="../../../../category/blog.html">blog</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="../../../../2018/03/23/ubuntu-17.10-windows10-dual-boot/" rel="bookmark"
           title="Permalink to Ubuntu 17.10とWindows10でデュアルブート構成にしてみた">Ubuntu 17.10とWindows10でデュアルブート構成にしてみた</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-03-23T20:15:00+09:00">
                Published: 2018-03-23
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://hnakamur.github.io">Hiroaki Nakamura</a>
        </address>
<p>In <a href="../../../../category/blog.html">blog</a>.</p>
<p>tags: <a href="../../../../tag/ubuntu.html">ubuntu</a> <a href="../../../../tag/windows.html">windows</a> </p>
</footer><!-- /.post-info -->      <div class="section" id="id1">
<h2>はじめに</h2>
<p><a class="reference external" href="/blog/2018/03/23/ubuntu-17.10-mac-os-high-sierra-dual-boot/">Ubuntu 17.10とmacOS High Sierraでデュアルブート構成にしてみた</a> の後、ThinkPad X260でUbuntu 17.10とWindows10でデュアルブート構成も試してみたのでメモです。</p>
<p>いろいろ試した後に今まとめてブログを書いているので、書くほうが追いついていなくて大変です。
ひとつずつ書いてから次を試せばいいんですが、気になると先に試してみたくなるので仕方ないといえば
仕方ないです。</p>
<p>こちらもほとんどの部分は上の記事と同じです。Windows10特有の話と上の記事に書き忘れたところを書いておきます。</p>
</div>
<div class="section" id="id2">
<h2>インストール前の話</h2>
<div class="section" id="windowsubuntu">
<h3>Windows側でUbuntuインストール用の領域確保</h3>
<p><a class="reference external" href="http://www.g104robo.com/entry/ubuntu-dualboot-win10-uefi">Ubuntu16.04をWindows10とデュアルブート in UEFI - 極楽とんぼのロボット製作記</a> の「Ubuntu用パーティション作成」を参考にしてUbuntu用のパーティションを作成しました。</p>
<p>MacBookのときと同様 この時点では最終的なUbuntu用のパーティション構成を作るわけではなくて、Ubuntuをインストールする領域を確保するために1つパーティションを作る感じです。</p>
<p>Windowsのボリュームの縮小では動かせないファイルがある的なことを言われてエクスプローラでみたディスク使用量よりもかなり大きいサイズにまでしか縮小できませんでした。</p>
<p>まあでもとりあえず試すには十分な容量が確保できたので、一旦進めてみることにしました。いつか気が向いたらパーティションを切り直してWindowsとLinuxをクリーンインストールしてみたいです。</p>
</div>
<div class="section" id="bitlocker">
<h3>BitLockerドライブ暗号化の解除</h3>
<p>BIOSでUSBメモリから起動するようにしてもLinuxインストーラが起動せず、Secure Bootを無効にする必要があるらしいと知ったのですが、Secure Bootを無効にするとBitLocker暗号化されたドライブからWindowsが起動できないということを知りました。</p>
<p>仕方ないので一旦Secure Bootを有効に戻してBitLocker暗号化を解除しました。</p>
<p>手順は <a class="reference external" href="http://www.fir.riec.tohoku.ac.jp/document/drive/bitlockerwin10/">Windows10 [ BitLockerの設定 ・解除 ] | ドキュメント |</a> がわかりやすかったです。</p>
<p>デュアルブート構成でWindowsのドライブも暗号化する方法がもしあるなら今後試してみたいところです。</p>
</div>
<div class="section" id="secure-boot">
<h3>Secure Bootの無効化</h3>
<p>BIOSから無効化しました。機種は違いますが
<a class="reference external" href="http://linuxbsdos.com/2015/07/27/how-to-disable-secure-boot-on-a-lenovo-g50-laptop/">How to disable Secure Boot on a Lenovo G50 laptop | LinuxBSDos.com</a>
と同じ感じです。</p>
</div>
</div>
<div class="section" id="id3">
<h2>インストール中の話</h2>
<div class="section" id="ubuntu">
<h3>Ubuntuのインストール時にホームディレクトリ暗号化</h3>
<p>以前Ubuntuでサーバを構築したときはホームディレクトリの暗号化を一度試した後sshの鍵認証でハマって止めていました。
<a class="reference external" href="https://hnakamur.github.io/blog/2016/05/02/uninstall-encrypted-home-on-ubuntu/">Ubuntuでホームディレクトリを暗号化するのを止めた</a></p>
<p>今回はデスクトップからログインするのでこの問題は起きないだろうということで試してみました（実際は暗号化無しでインストールを試した後、暗号化有りで再度インストールしてみました）。ThinkPadもMacBookも暗号化ありにしてみました。</p>
<p>手順は <a class="reference external" href="https://linuxfan.info/ubuntu-17-10-install-guide">Ubuntu 17.10インストールガイド【スクリーンショットつき解説】 | Linux Fan</a> の「ユーザー情報の設定」画面で「ホームフォルダーを暗号化する」にチェックをつけるだけです。</p>
</div>
<div class="section" id="wifi">
<h3>インストール時もWiFiは使えました</h3>
<p>ThinkPad X260ではインストール時もWiFiが使えました。</p>
</div>
</div>
<div class="section" id="id5">
<h2>インストール後の話</h2>
<div class="section" id="capslockctrl">
<h3>CapsLockとCtrlキーの入れ替え</h3>
<p>私はThinkPadもMacBookもUSキーボードを選択しています。</p>
<p>私の場合CapsLockとCtrlキーの入れ替えをしないとタイプミス連発して何もできないレベルなので
WindowsでもmacOSでもまず最初に設定していました。</p>
<p>ということでUbuntuでの設定方法を検索して
<a class="reference external" href="https://linuxfan.info/capslock-ctrl">コマンド一発でCapsLockをCtrlに変える方法 | Linux Fan</a> の
「コンソールでもCapsLockの動作を変更する方法（UbuntuなどDebian系）」の「CapsLockキーとCtrlキーを入れ替える」の手順で設定しました。</p>
<p>転記しておくと具体的には <code>/etc/default/keyboard</code> の <code>XKBOPTIONS</code> の値を以下のように書き換えて再起動です。</p>
<div class="highlight"><pre><span></span><span class="go">XKBOPTIONS=&quot;ctrl:swapcaps&quot;</span>
</pre></div>
<p>たぶんOS再起動までしなくても反映する方法はあるんでしょうが、調べてないです。
ThinkPadとMacBook両方でこの設定で使えています。</p>
</div>
<div class="section" id="windowsalt">
<h3>WindowsとAltの入れ替えはトライしたが断念</h3>
<p>MacBookとThinkPadに入れたUbuntuを触っていて違和感があると思ったら、
Super (Windowsキーとmacのcommandキー) とAltの並び順が逆なんでした。</p>
<p>ThinkPadでは左からWindowsキー、Altキー、スペースキーですが、
MacBook Proは左からaltキー、commandキー、スペースキーです。</p>
<p><code>/usr/share/X11/xkb/rules/base</code> に <code>altwin:swap_alt_win</code> という設定があるのを見つけて
<code>XKBOPTIONS=&quot;ctrl:swapcaps,altwin:swap_alt_win&quot;</code> と設定してみたのですが、効かないようでした。
この件は深追いせずに断念しました。いつか気が向いたらまた調べるかも。</p>
</div>
<div class="section" id="fn">
<h3>ファンクションのfnの挙動は最初から希望通り</h3>
<p>MacBookのときとは違い、ThinkPadではfnなしでF1〜F12を押すとファンクションキーとして動作するようになってました。</p>
</div>
<div class="section" id="id6">
<h3>タッチパッドの速度を最大に変更</h3>
<p>これもmacOSでもWindowsでもいつもこの設定なのでUbuntuでも同様に設定しました。
設定→デバイス→マウスとタッチパッドと進んだところで設定できます。</p>
<p>タップでクリックなど他の設定はデフォルトで全て希望通りなのでそのまま使ってます。</p>
</div>
<div class="section" id="waylandxorg">
<h3>WaylandからXorgに切り替え</h3>
<p><a class="reference external" href="https://linux.srad.jp/story/18/01/27/1830219/">Canonical、Ubuntu 18.04 LTSではXorgをデフォルトに | スラド Linux</a> という話は聞いていたので <a class="reference external" href="https://linuxfan.info/ubuntu-17-10-switch-wayland-xorg">【Ubuntu 17.10】WaylandからXorgに切り替えるべき7つの理由 | Linux Fan</a> という記事を見てXorgに切り替えておきました。</p>
</div>
<div class="section" id="id7">
<h3>画面の解像度はデフォルトのまま</h3>
<p>私のThinkPadの内蔵ディスプレイの解像度は1920x1080ですが、当たり前ですがディスプレイ設定もそうなっていてそのまま使っています。</p>
</div>
<div class="section" id="cica">
<h3>ターミナルのフォントをCicaに変更</h3>
<p>私はWindowsでもmacOSでもターミナルのフォントはCicaにしています。
<a class="reference external" href="https://github.com/miiton/Cica">miiton/Cica: プログラミング用日本語等幅フォント Cica(シカ)</a></p>
<p>見やすいですし、絵文字や記号も充実していて非常に快適です。ありがとうございます！</p>
<p><a class="reference external" href="https://github.com/miiton/Cica/releases">Releases · miiton/Cica</a> から最新版をダウンロードし、
<a class="reference external" href="https://sicklylife.jp/ubuntu/1710/settings.html#font_in">Ubuntu 17.10をインストールした直後に行う設定 &amp; インストールするソフト</a> の「フォントを追加する」の手順で追加しました。</p>
<p>具体的には以下の手順です。</p>
<ol class="arabic simple">
<li>ブラウザでダウンロードしたzipファイルをファイルアプリでダブルクリックします。</li>
<li>アーカイブマネージャで*.ttfファイルを1つずつダブルクリックして開くとウィンドウのタイトルバーにインストールボタンがあるのでそれを押してインストールします。</li>
</ol>
<p>その後Gnomeの端末アプリで以下の手順でCica Regularフォントに切り替えました。</p>
<ol class="arabic simple">
<li>[編集]→[プロファイルの設定]メニューを選択</li>
<li>[全般]タブの[フォントを指定する]にチェックを入れて、右のボタンを押してフォントを選択して設定</li>
</ol>
</div>
</div>
<div class="section" id="id8">
<h2>おわりに</h2>
<p>覚えている範囲での設定変更はこんなものだと思います。デスクトップのキーボード・ショートカットの話とかは長くなるので別の記事にします。</p>
</div>

    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is a custom version based on <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-53263855-1', 'auto');
    ga('send', 'pageview');
    </script>
</body>
</html>