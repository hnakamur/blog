<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: VirtualBox4, | hnakamur's blog at github]]></title>
  <link href="http://hnakamur.github.com/blog/categories/virtualbox4-/atom.xml" rel="self"/>
  <link href="http://hnakamur.github.com/blog/"/>
  <updated>2013-03-12T23:20:19+09:00</updated>
  <id>http://hnakamur.github.com/blog/</id>
  <author>
    <name><![CDATA[Hiroaki Nakamura]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[VirtualBox4でCentOS6.2をインストール]]></title>
    <link href="http://hnakamur.github.com/blog/2012/07/03/virtualbox4decentos6-dot-2woinsutoru/"/>
    <updated>2012-07-03T23:52:00+09:00</updated>
    <id>http://hnakamur.github.com/blog/2012/07/03/virtualbox4decentos6-dot-2woinsutoru</id>
    <content type="html"><![CDATA[<h2>VirtualBoxのインストール</h2>

<p><a href="https://www.virtualbox.org/wiki/Downloads">Downloads – Oracle VM VirtualBox</a>
からダウンロードしてインストールしてください。</p>

<h2>ネットワークインストールのISOイメージをダウンロード</h2>

<p><a href="http://ftp.riken.jp/Linux/centos/6.2/isos/x86_64/CentOS-6.2-x86_64-netinstall.iso">CentOS-6.2-x86_64-netinstall.iso</a></p>

<h2>ホストオンリーネットワークを作成</h2>

<ol>
<li>[VirualBox]/[環境設定...]</li>
<li>[ネットワーク]タブ</li>
<li>[+]アイコンボタンを押してvboxnet0を作成</li>
<li>ドライバーアイコンのボタン</li>
<li>[アダプタ]タブでIPv4アドレスが「192.168.56.1」となっていることを確認</li>
<li>[DHCPサーバー]タブ</li>
<li>[サーバーを有効化]のチェックを外す</li>
<li>[OK]</li>
<li>[OK]</li>
</ol>


<h2>仮想マシンの作成</h2>

<h3>仮想マシン名とOSタイプ</h3>

<p>名前は「CentOS6」
オペレーティングシステムは「Linux」
バージョンは「Linux 2.6 (64bit)」</p>

<h3>メモリ</h3>

<p>メインメモリのサイズは1024MB</p>

<h3>仮想ハードディスク</h3>

<p>変更なし</p>

<h3>the virtual disk creation wizard</h3>

<p>File typeはVDI (VirtualBox Disk Image)</p>

<h3>Virtual disk storage details</h3>

<p>Storage detailsはDyamically allocated</p>

<h3>Virtual disk file location and size</h3>

<p>サイズは30GB</p>

<h2>インストール前の仮想マシンの設定変更</h2>

<h3>DVDドライブにメディアを設定</h3>

<ol>
<li>[仮想マシン]/[設定]</li>
<li>[ストレージ]タブ</li>
<li>ストレージツリーでIDEコントローラ/空を選択</li>
<li>属性のCD/DVDドライブの右のDVDメディアアイコンをクリックして</li>
<li>上記でダウンロードしたCentOS-6.2-x86_64-netinstall.isoを選択</li>
<li>[OK]</li>
</ol>


<h3>ネットワークアダプタ</h3>

<p>以下の手順では[VirtualBox マネージャー]画面からでも操作可能な部分もありますが、説明しやすいのでメニューバーからの操作で説明します。</p>

<ol>
<li>[仮想マシン]/[設定]</li>
<li>[ネットワーク]タブ</li>
<li>[アダプタ2]タブ</li>
<li>[ネットワークアダプタを有効化]にチェック</li>
<li>[割り当て]で「ホストオンリーアダプタ」を選択</li>
<li>[名前]で「vboxnet0」を選択</li>
<li>[OK]</li>
</ol>


<h2>CentOS6.2のインストール</h2>

<h3>テキストモードでインストール開始</h3>

<ol>
<li>[仮想マシン]/[起動]</li>
<li>Welcome to CentOS 6.2!」の画面でTABを押す</li>
</ol>


<pre>
> vmlinuz initrd=initrd.img
</pre>


<p>と表示されているところに、スペース、text、リターンを入力し</p>

<pre>
> vmlinuz initrd=initrd.img text
</pre>


<p>としてインストール開始</p>

<h3>Disc Found</h3>

<p>[Skip]を選択</p>

<h3>Choose a Language</h3>

<p>[English]を選択</p>

<h3>Keyboard Type</h3>

<p>[us]を選択</p>

<h3>Installation Method</h3>

<p>[URL]を選択して[OK]</p>

<h3>Network Device</h3>

<p>[eth0]を選択して[OK]</p>

<h3>Configure TCP/IP</h3>

<p>[Enable IPv6 support]をオフにして[OK]</p>

<h3>URL Setup</h3>

<p>http://ftp.riken.jp/Linux/centos/6.2/os/x86_64
と入力して[OK]</p>

<h3>Would you like to use VNC?</h3>

<p>[Use text mode]を選択</p>

<h3>Error processing driveのWarning</h3>

<p>[Re-initialize all]を選択</p>

<h3>Time Zone Selection</h3>

<p>[System clock uses UTC]のチェックはオンで
[Asia/Tokyo]を選択して[OK]</p>

<h3>Root Password</h3>

<p>[Password]と[Password (confirm)]を入力して[OK]</p>

<h3>Partition Type</h3>

<p>[OK]</p>

<h3>Writing storage configuration to disk</h3>

<p>[Write changes to disk]</p>

<h3>Complete</h3>

<p>[Reboot]を押し、再起動が開始して[Welcome to CentOS 6.2!]の画面になったらTABを2回押して起動を中断
仮想マシンのウィンドウの閉じるボタンを押し、｢操作を選択]で[仮想マシンの電源オフ]を選択して[OK]</p>

<h2>インストール後の仮想マシンの設定変更</h2>

<h3>DVDドライブのメディアを除去</h3>

<ol>
<li>[仮想マシン]/[設定]</li>
<li>[ストレージ]タブ</li>
<li>ストレージツリーでIDEコントローラ/CentOS-6.2-x86_64-netinstall.isoを選択</li>
<li>属性のCD/DVDドライブの右のDVDメディアアイコンをクリックして</li>
<li>[仮想ドライブからディスクを除去]</li>
</ol>


<h3>ネットワークアダプタでvirtio-netを選択</h3>

<ol>
<li>[仮想マシン]/[設定]</li>
<li>[ネットワーク]タブ</li>
<li>[アダプタ1]タブ</li>
<li>[高度]をクリック</li>
<li>アダプタタイプで「準仮想化ネットワーク(virtio-net)」を選択</li>
<li>[アダプタ2]タブ</li>
<li>[高度]をクリック</li>
<li>アダプタタイプで「準仮想化ネットワーク(virtio-net)」を選択</li>
<li>[OK]</li>
</ol>


<h2>仮想ディスクから仮想マシンを起動してネットワークの設定</h2>

<p>[仮想マシン]/[起動]</p>

<p>[localhost login:]というログインプロンプトが表示されたらroot、リターンと入力し、[Password:]プロンプトでパスワード、リターンを入力し、ログイン。</p>

<h3>eth1の設定</h3>

<p>vi /etc/sysconfig/network-scripts/ifcfg-eth1</p>

<h4>変更前</h4>

<p>HWADDRの値はインストール毎に異なります。
<code>
DEVICE="eth1"
HWADDR="08:00:27:28:EB:27"
NM_CONTROLLED="yes"
ONBOOT="no"
</code></p>

<h4>変更後</h4>

<p>ONBOOTをyesに変更し、下記のようにTYPE, IPADDR, NETMASKの行を追加します。
<code>
DEVICE="eth1"
HWADDR="08:00:27:28:EB:27"
NM_CONTROLLED="yes"
ONBOOT="yes"
TYPE="Ethernet"
IPADDR="192.168.56.101"
NETMASK="255.255.255.0"
</code></p>

<pre>
/etc/init.d/network restart
</pre>


<p>を実行しネットワークを再起動します。</p>

<h3>ネットワークの動作確認</h3>

<p>以下のコマンドを実行し、DNS名前解決とインターネットへのアクセスができることを確認。</p>

<pre>
ping ftp.riken.jp
</pre>


<p>ホストマシンから仮想マシンにアクセスできることを確認。</p>

<pre>
ping 192.168.56.101
</pre>


<p>確認できたら仮想マシンからログアウト</p>

<pre>
exit
</pre>


<p>以降はホストマシンからsshでログインして操作可能です。
<code>
ssh root@192.168.56.101
</code></p>
]]></content>
  </entry>
  
</feed>
