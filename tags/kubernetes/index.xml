<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Kubernetes on hnakamur&#39;s blog</title>
    <link>https://hnakamur.github.io/blog/tags/kubernetes/</link>
    <description>Recent content in Kubernetes on hnakamur&#39;s blog</description>
    <generator>Hugo</generator>
    <language>ja-jp</language>
    <lastBuildDate>Mon, 02 Jan 2017 15:34:23 +0900</lastBuildDate>
    <atom:link href="https://hnakamur.github.io/blog/tags/kubernetes/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>さくらのクラウドでPackerとTerraformを使ってContainer Linuxの環境構築をしてみた</title>
      <link>https://hnakamur.github.io/blog/2017/01/02/use-container-linux-on-sakura-cloud-using-packer-and-terraform/</link>
      <pubDate>Mon, 02 Jan 2017 15:34:23 +0900</pubDate>
      <guid>https://hnakamur.github.io/blog/2017/01/02/use-container-linux-on-sakura-cloud-using-packer-and-terraform/</guid>
      <description>&lt;h2 id=&#34;はじめに&#34;&gt;はじめに&lt;/h2&gt;&#xA;&lt;p&gt;さくらのクラウドでPackerとTerraformを使って&lt;a href=&#34;https://coreos.com/os/docs/latest/&#34;&gt;CoreOS Container Linux&lt;/a&gt;の環境構築をしてみたのでメモです。&lt;/p&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://cloud-news.sakura.ad.jp/public_archive_iso/&#34;&gt;パブリックアーカイブ・ISOイメージ&lt;/a&gt;にCoreOSはあるのですが、現状では残念ながらバージョンが 367.1.0 (stable) とかなり古い状態です。&lt;/p&gt;&#xA;&lt;p&gt;そこで &lt;a href=&#34;https://stable.release.core-os.net/amd64-usr/&#34;&gt;https://stable.release.core-os.net/amd64-usr/&lt;/a&gt; 以下にある安定版公式ISOイメージの現時点の最新版である 1185.5.0 を使ってPackerでさくらのクラウド上にマイアーカイブを作成し、それを元にサーバで使用するディスクとサーバを作成します。&lt;/p&gt;</description>
    </item>
    <item>
      <title>KubernetesのSecrets機能を試してみた</title>
      <link>https://hnakamur.github.io/blog/2017/01/01/tried-kubernetes-secrets/</link>
      <pubDate>Sun, 01 Jan 2017 16:31:08 +0900</pubDate>
      <guid>https://hnakamur.github.io/blog/2017/01/01/tried-kubernetes-secrets/</guid>
      <description>&lt;h2 id=&#34;はじめに&#34;&gt;はじめに&lt;/h2&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://kubernetes.io/docs/tutorials/stateful-application/run-stateful-application/&#34;&gt;Running a Single-Instance Stateful Application - Kubernetes&lt;/a&gt; ではMySQLのrootユーザのパスワードを設定のyamlファイルに直接書いていましたが、 安全に管理するためには&lt;a href=&#34;http://kubernetes.io/docs/user-guide/secrets/&#34;&gt;Secrets - Kubernetes&lt;/a&gt; を使うべきとのことなので試してみました。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Kuberntesでデータ領域をNFSマウントしてMySQLを動かしてみた</title>
      <link>https://hnakamur.github.io/blog/2017/01/01/tried-mysql-and-nfs-on-kubernetes/</link>
      <pubDate>Sun, 01 Jan 2017 12:38:24 +0900</pubDate>
      <guid>https://hnakamur.github.io/blog/2017/01/01/tried-mysql-and-nfs-on-kubernetes/</guid>
      <description>&lt;h2 id=&#34;はじめに&#34;&gt;はじめに&lt;/h2&gt;&#xA;&lt;p&gt;&lt;a href=&#34;https://hnakamur.github.io/blog/blog/2017/01/01/use-nfs-persistent-volume-on-minikube-virtualbox/&#34;&gt;minikubeとVirtualBoxでNFSのpersistent volumeを試してみた · hnakamur&amp;rsquo;s blog at github&lt;/a&gt;の結果を踏まえて、 &lt;a href=&#34;http://kubernetes.io/docs/tutorials/stateful-application/run-stateful-application/&#34;&gt;Running a Single-Instance Stateful Application - Kubernetes&lt;/a&gt; のチュートリアルを試してみたのでメモです。&lt;/p&gt;&#xA;&lt;h2 id=&#34;設定ファイル&#34;&gt;設定ファイル&lt;/h2&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ cat persistent-volume-nfs.yml&#xA;kind: PersistentVolume&#xA;apiVersion: v1&#xA;metadata:&#xA;  name: pv-nfs&#xA;  labels:&#xA;    type: nfs&#xA;spec:&#xA;  capacity:&#xA;    storage: 30Gi&#xA;  accessModes:&#xA;    - ReadWriteMany&#xA;  persistentVolumeReclaimPolicy: Retain&#xA;  nfs:&#xA;    # TODO: modify path and server appropriately&#xA;    path: /Users/hnakamur/kube-data/mysql&#xA;    server: 192.168.99.1&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ cat mysql-pvc.yml&#xA;kind: PersistentVolumeClaim&#xA;apiVersion: v1&#xA;metadata:&#xA;  name: mysql-pvc&#xA;spec:&#xA;  accessModes:&#xA;    - ReadWriteMany&#xA;  resources:&#xA;    requests:&#xA;      storage: 15Gi&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ cat mysql-deploy.yml&#xA;apiVersion: extensions/v1beta1&#xA;kind: Deployment&#xA;metadata:&#xA;  name: mysql&#xA;spec:&#xA;  strategy:&#xA;    type: Recreate&#xA;  template:&#xA;    metadata:&#xA;      labels:&#xA;        app: mysql&#xA;    spec:&#xA;      containers:&#xA;      - image: mysql:5.6&#xA;        name: mysql&#xA;        env:&#xA;          # Use secret in real usage&#xA;        - name: MYSQL_ROOT_PASSWORD&#xA;          value: password&#xA;        ports:&#xA;        - containerPort: 3306&#xA;          name: mysql&#xA;        volumeMounts:&#xA;        - name: mysql-persistent-storage&#xA;          mountPath: /var/lib/mysql&#xA;      volumes:&#xA;      - name: mysql-persistent-storage&#xA;        persistentVolumeClaim:&#xA;          claimName: mysql-pvc&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ cat mysql-svc.yml&#xA;apiVersion: v1&#xA;kind: Service&#xA;metadata:&#xA;  name: mysql&#xA;spec:&#xA;  ports:&#xA;    - port: 3306&#xA;  selector:&#xA;    app: mysql&#xA;  clusterIP: None&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ハマった点としては、persistent volumeとpersistent volume claimのaccessModesは合わせないとうまく行きませんでした。具体的には &lt;code&gt;kubectl describe pvc mysql-pvc&lt;/code&gt; で確認したときにStatusがPendingになっていました。&lt;/p&gt;</description>
    </item>
    <item>
      <title>minikubeとVirtualBoxでNFSのpersistent volumeを試してみた</title>
      <link>https://hnakamur.github.io/blog/2017/01/01/use-nfs-persistent-volume-on-minikube-virtualbox/</link>
      <pubDate>Sun, 01 Jan 2017 09:40:35 +0900</pubDate>
      <guid>https://hnakamur.github.io/blog/2017/01/01/use-nfs-persistent-volume-on-minikube-virtualbox/</guid>
      <description>&lt;h2 id=&#34;はじめに&#34;&gt;はじめに&lt;/h2&gt;&#xA;&lt;p&gt;&lt;a href=&#34;http://kubernetes.io/docs/tutorials/&#34;&gt;Tutorials - Kubernetes&lt;/a&gt;のStateful Applicationsを試そうと思って少し読んだ所、 persistent volume というものを用意する必要があることがわかりました。&lt;/p&gt;</description>
    </item>
    <item>
      <title>minikubeでKubernetesのチュートリアルをやってみた</title>
      <link>https://hnakamur.github.io/blog/2016/12/31/tried-kubernetes-tutorial-with-minikube/</link>
      <pubDate>Sat, 31 Dec 2016 16:24:33 +0900</pubDate>
      <guid>https://hnakamur.github.io/blog/2016/12/31/tried-kubernetes-tutorial-with-minikube/</guid>
      <description>&lt;h2 id=&#34;はじめに&#34;&gt;はじめに&lt;/h2&gt;&#xA;&lt;p&gt;検索してたら &lt;a href=&#34;https://news.ycombinator.com/item?id=12462261&#34;&gt;Why Kubernetes is winning the container war | Hacker News&lt;/a&gt; というHacker Newsのスレッドを見つけました。&lt;/p&gt;&#xA;&lt;p&gt;実際に勝つどうかはともかく、実際に使っている人やMesosphereやRed Hatの人のコメントがあり、非常に参考になりそうです。このブログ記事を書くまで私は Kubernetes はろくに触ったことが無かったので内容はよくわからないですが、後日また見直してみたいところです。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
